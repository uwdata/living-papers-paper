/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const e=window,t=e.ShadowRoot&&(void 0===e.ShadyCSS||e.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,n=Symbol(),i=new WeakMap;const r=e=>new class{constructor(e,t,i){if(this._$cssResult$=!0,i!==n)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const n=this.t;if(t&&void 0===e){const t=void 0!==n&&1===n.length;t&&(e=i.get(n)),void 0===e&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),t&&i.set(n,e))}return e}toString(){return this.cssText}}("string"==typeof e?e:e+"",void 0,n),s=t?e=>e:e=>e instanceof CSSStyleSheet?(e=>{let t="";for(const n of e.cssRules)t+=n.cssText;return r(t)})(e):e
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */;var o;const a=window,l=a.trustedTypes,c=l?l.emptyScript:"",u=a.reactiveElementPolyfillSupport,d={toAttribute(e,t){switch(t){case Boolean:e=e?c:null;break;case Object:case Array:e=null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){let n=e;switch(t){case Boolean:n=null!==e;break;case Number:n=null===e?null:Number(e);break;case Object:case Array:try{n=JSON.parse(e)}catch(e){n=null}}return n}},f=(e,t)=>t!==e&&(t==t||e==e),h={attribute:!0,type:String,converter:d,reflect:!1,hasChanged:f};let p=class extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this.u()}static addInitializer(e){var t;this.finalize(),(null!==(t=this.h)&&void 0!==t?t:this.h=[]).push(e)}static get observedAttributes(){this.finalize();const e=[];return this.elementProperties.forEach(((t,n)=>{const i=this._$Ep(n,t);void 0!==i&&(this._$Ev.set(i,n),e.push(i))})),e}static createProperty(e,t=h){if(t.state&&(t.attribute=!1),this.finalize(),this.elementProperties.set(e,t),!t.noAccessor&&!this.prototype.hasOwnProperty(e)){const n="symbol"==typeof e?Symbol():"__"+e,i=this.getPropertyDescriptor(e,n,t);void 0!==i&&Object.defineProperty(this.prototype,e,i)}}static getPropertyDescriptor(e,t,n){return{get(){return this[t]},set(i){const r=this[e];this[t]=i,this.requestUpdate(e,r,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||h}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const e=Object.getPrototypeOf(this);if(e.finalize(),void 0!==e.h&&(this.h=[...e.h]),this.elementProperties=new Map(e.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const e=this.properties,t=[...Object.getOwnPropertyNames(e),...Object.getOwnPropertySymbols(e)];for(const n of t)this.createProperty(n,e[n])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const n=new Set(e.flat(1/0).reverse());for(const e of n)t.unshift(s(e))}else void 0!==e&&t.push(s(e));return t}static _$Ep(e,t){const n=t.attribute;return!1===n?void 0:"string"==typeof n?n:"string"==typeof e?e.toLowerCase():void 0}u(){var e;this._$E_=new Promise((e=>this.enableUpdating=e)),this._$AL=new Map,this._$Eg(),this.requestUpdate(),null===(e=this.constructor.h)||void 0===e||e.forEach((e=>e(this)))}addController(e){var t,n;(null!==(t=this._$ES)&&void 0!==t?t:this._$ES=[]).push(e),void 0!==this.renderRoot&&this.isConnected&&(null===(n=e.hostConnected)||void 0===n||n.call(e))}removeController(e){var t;null===(t=this._$ES)||void 0===t||t.splice(this._$ES.indexOf(e)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach(((e,t)=>{this.hasOwnProperty(t)&&(this._$Ei.set(t,this[t]),delete this[t])}))}createRenderRoot(){var n;const i=null!==(n=this.shadowRoot)&&void 0!==n?n:this.attachShadow(this.constructor.shadowRootOptions);return((n,i)=>{t?n.adoptedStyleSheets=i.map((e=>e instanceof CSSStyleSheet?e:e.styleSheet)):i.forEach((t=>{const i=document.createElement("style"),r=e.litNonce;void 0!==r&&i.setAttribute("nonce",r),i.textContent=t.cssText,n.appendChild(i)}))})(i,this.constructor.elementStyles),i}connectedCallback(){var e;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostConnected)||void 0===t?void 0:t.call(e)}))}enableUpdating(e){}disconnectedCallback(){var e;null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostDisconnected)||void 0===t?void 0:t.call(e)}))}attributeChangedCallback(e,t,n){this._$AK(e,n)}_$EO(e,t,n=h){var i;const r=this.constructor._$Ep(e,n);if(void 0!==r&&!0===n.reflect){const s=(void 0!==(null===(i=n.converter)||void 0===i?void 0:i.toAttribute)?n.converter:d).toAttribute(t,n.type);this._$El=e,null==s?this.removeAttribute(r):this.setAttribute(r,s),this._$El=null}}_$AK(e,t){var n;const i=this.constructor,r=i._$Ev.get(e);if(void 0!==r&&this._$El!==r){const e=i.getPropertyOptions(r),s="function"==typeof e.converter?{fromAttribute:e.converter}:void 0!==(null===(n=e.converter)||void 0===n?void 0:n.fromAttribute)?e.converter:d;this._$El=r,this[r]=s.fromAttribute(t,e.type),this._$El=null}}requestUpdate(e,t,n){let i=!0;void 0!==e&&(((n=n||this.constructor.getPropertyOptions(e)).hasChanged||f)(this[e],t)?(this._$AL.has(e)||this._$AL.set(e,t),!0===n.reflect&&this._$El!==e&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(e,n))):i=!1),!this.isUpdatePending&&i&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(e){Promise.reject(e)}const e=this.scheduleUpdate();return null!=e&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach(((e,t)=>this[t]=e)),this._$Ei=void 0);let t=!1;const n=this._$AL;try{t=this.shouldUpdate(n),t?(this.willUpdate(n),null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostUpdate)||void 0===t?void 0:t.call(e)})),this.update(n)):this._$Ek()}catch(e){throw t=!1,this._$Ek(),e}t&&this._$AE(n)}willUpdate(e){}_$AE(e){var t;null===(t=this._$ES)||void 0===t||t.forEach((e=>{var t;return null===(t=e.hostUpdated)||void 0===t?void 0:t.call(e)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(e){return!0}update(e){void 0!==this._$EC&&(this._$EC.forEach(((e,t)=>this._$EO(t,this[t],e))),this._$EC=void 0),this._$Ek()}updated(e){}firstUpdated(e){}};
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
var m;p.finalized=!0,p.elementProperties=new Map,p.elementStyles=[],p.shadowRootOptions={mode:"open"},null==u||u({ReactiveElement:p}),(null!==(o=a.reactiveElementVersions)&&void 0!==o?o:a.reactiveElementVersions=[]).push("1.6.1");const v=window,y=v.trustedTypes,b=y?y.createPolicy("lit-html",{createHTML:e=>e}):void 0,g="$lit$",w=`lit$${(Math.random()+"").slice(9)}$`,_="?"+w,$=`<${_}>`,E=document,A=()=>E.createComment(""),S=e=>null===e||"object"!=typeof e&&"function"!=typeof e,x=Array.isArray,C="[ \t\n\f\r]",N=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,k=/-->/g,T=/>/g,P=RegExp(`>|${C}(?:([^\\s"'>=/]+)(${C}*=${C}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),j=/'/g,I=/"/g,R=/^(?:script|style|textarea|title)$/i,M=(e=>(t,...n)=>({_$litType$:e,strings:t,values:n}))(1),O=Symbol.for("lit-noChange"),D=Symbol.for("lit-nothing"),L=new WeakMap,U=E.createTreeWalker(E,129,null,!1),q=(e,t)=>{const n=e.length-1,i=[];let r,s=2===t?"<svg>":"",o=N;for(let t=0;t<n;t++){const n=e[t];let a,l,c=-1,u=0;for(;u<n.length&&(o.lastIndex=u,l=o.exec(n),null!==l);)u=o.lastIndex,o===N?"!--"===l[1]?o=k:void 0!==l[1]?o=T:void 0!==l[2]?(R.test(l[2])&&(r=RegExp("</"+l[2],"g")),o=P):void 0!==l[3]&&(o=P):o===P?">"===l[0]?(o=null!=r?r:N,c=-1):void 0===l[1]?c=-2:(c=o.lastIndex-l[2].length,a=l[1],o=void 0===l[3]?P:'"'===l[3]?I:j):o===I||o===j?o=P:o===k||o===T?o=N:(o=P,r=void 0);const d=o===P&&e[t+1].startsWith("/>")?" ":"";s+=o===N?n+$:c>=0?(i.push(a),n.slice(0,c)+g+n.slice(c)+w+d):n+w+(-2===c?(i.push(void 0),t):d)}const a=s+(e[n]||"<?>")+(2===t?"</svg>":"");if(!Array.isArray(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return[void 0!==b?b.createHTML(a):a,i]};class B{constructor({strings:e,_$litType$:t},n){let i;this.parts=[];let r=0,s=0;const o=e.length-1,a=this.parts,[l,c]=q(e,t);if(this.el=B.createElement(l,n),U.currentNode=this.el.content,2===t){const e=this.el.content,t=e.firstChild;t.remove(),e.append(...t.childNodes)}for(;null!==(i=U.nextNode())&&a.length<o;){if(1===i.nodeType){if(i.hasAttributes()){const e=[];for(const t of i.getAttributeNames())if(t.endsWith(g)||t.startsWith(w)){const n=c[s++];if(e.push(t),void 0!==n){const e=i.getAttribute(n.toLowerCase()+g).split(w),t=/([.?@])?(.*)/.exec(n);a.push({type:1,index:r,name:t[2],strings:e,ctor:"."===t[1]?J:"?"===t[1]?G:"@"===t[1]?K:W})}else a.push({type:6,index:r})}for(const t of e)i.removeAttribute(t)}if(R.test(i.tagName)){const e=i.textContent.split(w),t=e.length-1;if(t>0){i.textContent=y?y.emptyScript:"";for(let n=0;n<t;n++)i.append(e[n],A()),U.nextNode(),a.push({type:2,index:++r});i.append(e[t],A())}}}else if(8===i.nodeType)if(i.data===_)a.push({type:2,index:r});else{let e=-1;for(;-1!==(e=i.data.indexOf(w,e+1));)a.push({type:7,index:r}),e+=w.length-1}r++}}static createElement(e,t){const n=E.createElement("template");return n.innerHTML=e,n}}function H(e,t,n=e,i){var r,s,o,a;if(t===O)return t;let l=void 0!==i?null===(r=n._$Co)||void 0===r?void 0:r[i]:n._$Cl;const c=S(t)?void 0:t._$litDirective$;return(null==l?void 0:l.constructor)!==c&&(null===(s=null==l?void 0:l._$AO)||void 0===s||s.call(l,!1),void 0===c?l=void 0:(l=new c(e),l._$AT(e,n,i)),void 0!==i?(null!==(o=(a=n)._$Co)&&void 0!==o?o:a._$Co=[])[i]=l:n._$Cl=l),void 0!==l&&(t=H(e,l._$AS(e,t.values),l,i)),t}class F{constructor(e,t){this.u=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}v(e){var t;const{el:{content:n},parts:i}=this._$AD,r=(null!==(t=null==e?void 0:e.creationScope)&&void 0!==t?t:E).importNode(n,!0);U.currentNode=r;let s=U.nextNode(),o=0,a=0,l=i[0];for(;void 0!==l;){if(o===l.index){let t;2===l.type?t=new z(s,s.nextSibling,this,e):1===l.type?t=new l.ctor(s,l.name,l.strings,this,e):6===l.type&&(t=new Y(s,this,e)),this.u.push(t),l=i[++a]}o!==(null==l?void 0:l.index)&&(s=U.nextNode(),o++)}return r}p(e){let t=0;for(const n of this.u)void 0!==n&&(void 0!==n.strings?(n._$AI(e,n,t),t+=n.strings.length-2):n._$AI(e[t])),t++}}class z{constructor(e,t,n,i){var r;this.type=2,this._$AH=D,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=n,this.options=i,this._$Cm=null===(r=null==i?void 0:i.isConnected)||void 0===r||r}get _$AU(){var e,t;return null!==(t=null===(e=this._$AM)||void 0===e?void 0:e._$AU)&&void 0!==t?t:this._$Cm}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return void 0!==t&&11===(null==e?void 0:e.nodeType)&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=H(this,e,t),S(e)?e===D||null==e||""===e?(this._$AH!==D&&this._$AR(),this._$AH=D):e!==this._$AH&&e!==O&&this.g(e):void 0!==e._$litType$?this.$(e):void 0!==e.nodeType?this.T(e):(e=>x(e)||"function"==typeof(null==e?void 0:e[Symbol.iterator]))(e)?this.k(e):this.g(e)}S(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.S(e))}g(e){this._$AH!==D&&S(this._$AH)?this._$AA.nextSibling.data=e:this.T(E.createTextNode(e)),this._$AH=e}$(e){var t;const{values:n,_$litType$:i}=e,r="number"==typeof i?this._$AC(e):(void 0===i.el&&(i.el=B.createElement(i.h,this.options)),i);if((null===(t=this._$AH)||void 0===t?void 0:t._$AD)===r)this._$AH.p(n);else{const e=new F(r,this),t=e.v(this.options);e.p(n),this.T(t),this._$AH=e}}_$AC(e){let t=L.get(e.strings);return void 0===t&&L.set(e.strings,t=new B(e)),t}k(e){x(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let n,i=0;for(const r of e)i===t.length?t.push(n=new z(this.S(A()),this.S(A()),this,this.options)):n=t[i],n._$AI(r),i++;i<t.length&&(this._$AR(n&&n._$AB.nextSibling,i),t.length=i)}_$AR(e=this._$AA.nextSibling,t){var n;for(null===(n=this._$AP)||void 0===n||n.call(this,!1,!0,t);e&&e!==this._$AB;){const t=e.nextSibling;e.remove(),e=t}}setConnected(e){var t;void 0===this._$AM&&(this._$Cm=e,null===(t=this._$AP)||void 0===t||t.call(this,e))}}class W{constructor(e,t,n,i,r){this.type=1,this._$AH=D,this._$AN=void 0,this.element=e,this.name=t,this._$AM=i,this.options=r,n.length>2||""!==n[0]||""!==n[1]?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=D}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,t=this,n,i){const r=this.strings;let s=!1;if(void 0===r)e=H(this,e,t,0),s=!S(e)||e!==this._$AH&&e!==O,s&&(this._$AH=e);else{const i=e;let o,a;for(e=r[0],o=0;o<r.length-1;o++)a=H(this,i[n+o],t,o),a===O&&(a=this._$AH[o]),s||(s=!S(a)||a!==this._$AH[o]),a===D?e=D:e!==D&&(e+=(null!=a?a:"")+r[o+1]),this._$AH[o]=a}s&&!i&&this.j(e)}j(e){e===D?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=e?e:"")}}class J extends W{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===D?void 0:e}}const V=y?y.emptyScript:"";class G extends W{constructor(){super(...arguments),this.type=4}j(e){e&&e!==D?this.element.setAttribute(this.name,V):this.element.removeAttribute(this.name)}}class K extends W{constructor(e,t,n,i,r){super(e,t,n,i,r),this.type=5}_$AI(e,t=this){var n;if((e=null!==(n=H(this,e,t,0))&&void 0!==n?n:D)===O)return;const i=this._$AH,r=e===D&&i!==D||e.capture!==i.capture||e.once!==i.once||e.passive!==i.passive,s=e!==D&&(i===D||r);r&&this.element.removeEventListener(this.name,this,i),s&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t,n;"function"==typeof this._$AH?this._$AH.call(null!==(n=null===(t=this.options)||void 0===t?void 0:t.host)&&void 0!==n?n:this.element,e):this._$AH.handleEvent(e)}}class Y{constructor(e,t,n){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(e){H(this,e)}}const Z=v.litHtmlPolyfillSupport;null==Z||Z(B,z),(null!==(m=v.litHtmlVersions)&&void 0!==m?m:v.litHtmlVersions=[]).push("2.7.0");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
var X,Q;class ee extends p{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var e,t;const n=super.createRenderRoot();return null!==(e=(t=this.renderOptions).renderBefore)&&void 0!==e||(t.renderBefore=n.firstChild),n}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=((e,t,n)=>{var i,r;const s=null!==(i=null==n?void 0:n.renderBefore)&&void 0!==i?i:t;let o=s._$litPart$;if(void 0===o){const e=null!==(r=null==n?void 0:n.renderBefore)&&void 0!==r?r:null;s._$litPart$=o=new z(t.insertBefore(A(),e),e,void 0,null!=n?n:{})}return o._$AI(e),o})(t,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),null===(e=this._$Do)||void 0===e||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),null===(e=this._$Do)||void 0===e||e.setConnected(!1)}render(){return O}}ee.finalized=!0,ee._$litElement$=!0,null===(X=globalThis.litElementHydrateSupport)||void 0===X||X.call(globalThis,{LitElement:ee});const te=globalThis.litElementPolyfillSupport;null==te||te({LitElement:ee}),(null!==(Q=globalThis.litElementVersions)&&void 0!==Q?Q:globalThis.litElementVersions=[]).push("3.3.0");const ne="cell-view",ie="data-attr",re="data-cell",se="data-bind",oe="data-bind-set";class ae{constructor(e,t,n){this.runtime=e,this.name=t,this.value=n,this.paused=!1,this.ignore=null,this.queued=[],this.inputs=new Map,e.variable(null,(e=>e),[t],{fulfilled:e=>this.paused?this.dequeue():this.update(e)})}add(e,{override:t=!1,event:n=ce(e),valueof:i=le}={}){t?this.update(i(e)):i(e,this.value);const r=()=>this.queue(e,i(e));return this.inputs.set(e,{input:e,event:n,listener:r,valueof:i}),e.addEventListener(n,r),this}addCell(e,t){let n;return e.addEventListener("change",(async()=>{const i=e.value;i!==n&&(n&&this.delete(n),this.add(n=i,t))})),this}delete(e){const{event:t,listener:n}=this.inputs.get(e);e.removeEventListener(t,n),this.inputs.delete(e)}queue(e,t){this.ignore!==e&&(this.paused||this.queued.length||function(e){"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame(e):setTimeout(e,0)}((()=>this.dequeue())),this.queued.push(t))}dequeue(){if(this.paused=!1,this.queued.length){const e=this.queued;this.queued=[],this.update(e.pop())}}update(e){if(this.value!==e){this.value=e,this.paused=!0;for(const{input:t,event:n,valueof:i}of this.inputs.values())i(t)!==e&&(this.ignore=t,i(t,e),t.dispatchEvent(new Event(n)),this.ignore=null);this.runtime.redefine(this.name,e)}}}function le(e,t){if(arguments.length>1)switch(e.type){case"date":return e.valueAsDate=t;case"checkbox":return e.checked=t;default:return e.value=t}else switch(e.type){case"range":case"number":return e.valueAsNumber;case"date":return e.valueAsDate;case"checkbox":return e.checked;default:return e.value}}function ce(e){switch(e.type){case"button":case"submit":case"checkbox":return"click";default:return"input"}}const ue="pending",de="fulfilled",fe="rejected";class he{constructor(e){this.status=ue,this.value=void 0,this.callback=e}promise(){switch(this.status){case de:return Promise.resolve(this.value);case fe:return Promise.reject(this.value.error);case ue:return this._promise||(this._promise=new Promise(((e,t)=>{this._resolve=e,this._reject=t})))}}update(e,t){this.status=e,e!==ue&&(this.value=t),this.callback(this.status,this.value)}pending(){this.update(ue,void 0)}fulfilled(e){this.update(de,e),this._promise&&(this._resolve(e),this._promise=this._resolve=this._reject=null)}rejected(e,t){this.update(fe,{error:e,name:t}),this._promise&&(this._reject(e),this._promise=this._resolve=this._reject=null)}}function pe(e,t,n,i={}){const{cells:r=(()=>[]),attrs:s=(()=>[]),event:o=(()=>[])}=n,a=function(e){const t=new Map;return e.querySelectorAll(`[${ie}]`).forEach((e=>{t.set(e.getAttribute(ie),e)})),e=>"object"==typeof e?e:t.get(e)}(t);e.define(r(),function(e){const t=new Map;return e.querySelectorAll(ne).forEach((e=>{t.set(+e.getAttribute(re),e.observer)})),e=>t.get(e.cell)}(t)),e.define(s(),function(e,t){return n=>{const[i,r]=t[n.cell],s=e(i),o=new he(((e,t)=>{e===de?s.setAttribute(r,t):e===fe&&console.error(t.error)}));return s.observers=s.observers||new Map,s.observers.set(r,o),o}}(a,i.attrs)),e.define(o(),function(e,t,n){return i=>{const{define:[r],cell:s}=i,[o,a]=t[s];return e(o).addEventListener(a,n.handler(r)),{rejected(e){console.error(e)}}}}(a,i.events,e)),function(e,t){const n=new Map,i=(t,i)=>{e.querySelectorAll(`[${t}]`).forEach((e=>{const r=e.getAttribute(t),s={el:e,override:i};n.has(r)?n.get(r).push(s):n.set(r,[s])}))};i(se,!1),i(oe,!0);const r=(e,{el:t,override:n})=>{t.tagName.toLowerCase()===ne?e.addCell(t,{override:n}):e.add(t,{override:n})};n.forEach(((e,n)=>{(async function(e,t){return new ae(e,t,await e.value(t))})(t,n).then((t=>{e.forEach((e=>r(t,e)))}))}))}(t,e)}const{getPrototypeOf:me,getOwnPropertyDescriptors:ve}=Object;me({});var ye={},be={};function ge(e){return new Function("d","return {"+e.map((function(e,t){return JSON.stringify(e)+": d["+t+'] || ""'})).join(",")+"}")}function we(e){var t=Object.create(null),n=[];return e.forEach((function(e){for(var i in e)i in t||n.push(t[i]=i)})),n}function _e(e,t){var n=e+"",i=n.length;return i<t?new Array(t-i+1).join(0)+n:n}function $e(e){var t,n=e.getUTCHours(),i=e.getUTCMinutes(),r=e.getUTCSeconds(),s=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":((t=e.getUTCFullYear())<0?"-"+_e(-t,6):t>9999?"+"+_e(t,6):_e(t,4))+"-"+_e(e.getUTCMonth()+1,2)+"-"+_e(e.getUTCDate(),2)+(s?"T"+_e(n,2)+":"+_e(i,2)+":"+_e(r,2)+"."+_e(s,3)+"Z":r?"T"+_e(n,2)+":"+_e(i,2)+":"+_e(r,2)+"Z":i||n?"T"+_e(n,2)+":"+_e(i,2)+"Z":"")}function Ee(e){var t=new RegExp('["'+e+"\n\r]"),n=e.charCodeAt(0);function i(e,t){var i,r=[],s=e.length,o=0,a=0,l=s<=0,c=!1;function u(){if(l)return be;if(c)return c=!1,ye;var t,i,r=o;if(34===e.charCodeAt(r)){for(;o++<s&&34!==e.charCodeAt(o)||34===e.charCodeAt(++o););return(t=o)>=s?l=!0:10===(i=e.charCodeAt(o++))?c=!0:13===i&&(c=!0,10===e.charCodeAt(o)&&++o),e.slice(r+1,t-1).replace(/""/g,'"')}for(;o<s;){if(10===(i=e.charCodeAt(t=o++)))c=!0;else if(13===i)c=!0,10===e.charCodeAt(o)&&++o;else if(i!==n)continue;return e.slice(r,t)}return l=!0,e.slice(r,s)}for(10===e.charCodeAt(s-1)&&--s,13===e.charCodeAt(s-1)&&--s;(i=u())!==be;){for(var d=[];i!==ye&&i!==be;)d.push(i),i=u();t&&null==(d=t(d,a++))||r.push(d)}return r}function r(t,n){return t.map((function(t){return n.map((function(e){return o(t[e])})).join(e)}))}function s(t){return t.map(o).join(e)}function o(e){return null==e?"":e instanceof Date?$e(e):t.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}return{parse:function(e,t){var n,r,s=i(e,(function(e,i){if(n)return n(e,i-1);r=e,n=t?function(e,t){var n=ge(e);return function(i,r){return t(n(i),r,e)}}(e,t):ge(e)}));return s.columns=r||[],s},parseRows:i,format:function(t,n){return null==n&&(n=we(t)),[n.map(o).join(e)].concat(r(t,n)).join("\n")},formatBody:function(e,t){return null==t&&(t=we(e)),r(e,t).join("\n")},formatRows:function(e){return e.map(s).join("\n")},formatRow:s,formatValue:o}}var Ae=Ee(","),Se=Ae.parse,xe=Ae.parseRows,Ce=Ee("\t"),Ne=Ce.parse,ke=Ce.parseRows;function Te(e){for(var t in e){var n,i,r=e[t].trim();if(r)if("true"===r)r=!0;else if("false"===r)r=!1;else if("NaN"===r)r=NaN;else if(isNaN(n=+r)){if(!(i=r.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;Pe&&i[4]&&!i[7]&&(r=r.replace(/-/g,"/").replace(/T/," ")),r=new Date(r)}else r=n;else r=null;e[t]=r}return e}const Pe=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function je(e,t,n){return{resolve:(i=n)=>`${e}@${t}/${i}`}}const Ie=je("d3","7.8.4","dist/d3.min.js"),Re=je("@observablehq/inputs","0.10.4","dist/inputs.min.js"),Me=je("@observablehq/plot","0.6.5","dist/plot.umd.min.js"),Oe=je("@observablehq/graphviz","0.2.1","dist/graphviz.min.js"),De=je("@observablehq/highlight.js","2.0.0","highlight.min.js"),Le=je("@observablehq/katex","0.11.1","dist/katex.min.js"),Ue=je("lodash","4.17.21","lodash.min.js"),qe=je("htl","0.3.1","dist/htl.min.js"),Be=je("jszip","3.10.1","dist/jszip.min.js"),He=je("marked","0.3.12","marked.min.js"),Fe=je("sql.js","1.8.0","dist/sql-wasm.js"),ze=je("vega","5.22.1","build/vega.min.js"),We=je("vega-lite","5.6.0","build/vega-lite.min.js"),Je=je("vega-lite-api","5.0.0","build/vega-lite-api.min.js"),Ve=je("apache-arrow","4.0.1","Arrow.es2015.min.js"),Ge=je("apache-arrow","9.0.0","+esm"),Ke=je("apache-arrow","11.0.0","+esm"),Ye=je("arquero","4.8.8","dist/arquero.min.js"),Ze=je("topojson-client","3.1.0","dist/topojson-client.min.js"),Xe=je("exceljs","4.3.0","dist/exceljs.min.js"),Qe=je("mermaid","9.2.2","dist/mermaid.min.js"),et=je("leaflet","1.9.3","dist/leaflet.js"),tt=je("@duckdb/duckdb-wasm","1.24.0","+esm"),nt=new Map,it=[],rt=it.map,st=it.some,ot=it.hasOwnProperty,at=/^((?:@[^/@]+\/)?[^/@]+)(?:@([^/]+))?(?:\/(.*))?$/,lt=/^\d+\.\d+\.\d+(-[\w-.+]+)?$/,ct=/(?:\.[^/]*|\/)$/;class ut extends Error{constructor(e){super(e)}}function dt(e){const t=at.exec(e);return t&&{name:t[1],version:t[2],path:t[3]}}function ft(e="https://cdn.jsdelivr.net/npm/",t=["unpkg","jsdelivr","browser","main"]){if(!/\/$/.test(e))throw new Error("origin lacks trailing slash");function n(t){const n=`${e}${t.name}${t.version?`@${t.version}`:""}/package.json`;let i=nt.get(n);return i||nt.set(n,i=fetch(n).then((e=>{if(!e.ok)throw new ut("unable to load package.json");return e.redirected&&!nt.has(e.url)&&nt.set(e.url,i),e.json()}))),i}return async function(i,r){if(i.startsWith(e)&&(i=i.substring(e.length)),/^(\w+:)|\/\//i.test(i))return i;if(/^[.]{0,2}\//i.test(i))return new URL(i,r??location).href;if(!i.length||/^[\s._]/.test(i)||/\s$/.test(i))throw new ut("illegal name");const s=dt(i);if(!s)return`${e}${i}`;if(!s.version&&null!=r&&r.startsWith(e)){const t=await n(dt(r.substring(e.length)));s.version=t.dependencies&&t.dependencies[s.name]||t.peerDependencies&&t.peerDependencies[s.name]}if(s.path&&!ct.test(s.path)&&(s.path+=".js"),s.path&&s.version&&lt.test(s.version))return`${e}${s.name}@${s.version}/${s.path}`;const o=await n(s);return`${e}${o.name}@${o.version}/${s.path||function(e){for(const n of t){let t=e[n];if("string"==typeof t)return t.startsWith("./")&&(t=t.slice(2)),ct.test(t)?t:`${t}.js`}}(o)||"index.js"}`}}ut.prototype.name=ut.name;var ht=pt(ft());function pt(e){const t=new Map,n=r(null);function i(e){if("string"!=typeof e)return e;let n=t.get(e);return n||t.set(e,n=new Promise(((t,n)=>{const i=document.createElement("script");i.onload=()=>{try{t(it.pop()(r(e)))}catch(e){n(new ut("invalid module"))}i.remove()},i.onerror=()=>{n(new ut("unable to load module")),i.remove()},i.async=!0,i.src=e,window.define=bt,document.head.appendChild(i)}))),n}function r(t){return n=>Promise.resolve(e(n,t)).then(i)}function s(e){return arguments.length>1?Promise.all(rt.call(arguments,n)).then(mt):n(e)}return s.alias=function(t){return pt(((n,i)=>n in t&&(i=null,"string"!=typeof(n=t[n]))?n:e(n,i)))},s.resolve=e,s}function mt(e){const t={};for(const n of e)for(const e in n)ot.call(n,e)&&(null==n[e]?Object.defineProperty(t,e,{get:vt(n,e)}):t[e]=n[e]);return t}function vt(e,t){return()=>e[t]}function yt(e){return"exports"===(e+="")||"module"===e}function bt(e,t,n){const i=arguments.length;i<2?(n=e,t=[]):i<3&&(n=t,t="string"==typeof e?[]:e),it.push(st.call(t,yt)?e=>{const i={},r={exports:i};return Promise.all(rt.call(t,(t=>"exports"===(t+="")?i:"module"===t?r:e(t)))).then((e=>(n.apply(null,e),r.exports)))}:e=>Promise.all(rt.call(t,e)).then((e=>"function"==typeof n?n.apply(null,e):n)))}bt.amd={};const gt="https://cdn.observableusercontent.com/npm/";let wt,_t=ht;async function $t(e){const[t,n]=await Promise.all([e(Fe.resolve()),e.resolve(Fe.resolve("dist/"))]);return t({locateFile:e=>`${n}${e}`})}class Et{constructor(e){Object.defineProperties(this,{_db:{value:e}})}static async open(e){const[t,n]=await Promise.all([$t(_t),Promise.resolve(e).then(St)]);return new Et(new t.Database(n))}async query(e,t){return await async function(e,t,n){const[i]=await e.exec(t,n);if(!i)return[];const{columns:r,values:s}=i,o=s.map((e=>Object.fromEntries(e.map(((e,t)=>[r[t],e])))));return o.columns=r,o}(this._db,e,t)}async queryRow(e,t){return(await this.query(e,t))[0]||null}async explain(e,t){return xt("pre",{className:"observablehq--inspect"},[Ct((await this.query(`EXPLAIN QUERY PLAN ${e}`,t)).map((e=>e.detail)).join("\n"))])}async describeTables({schema:e}={}){return this.query(`SELECT NULLIF(schema, 'main') AS schema, name FROM pragma_table_list() WHERE type = 'table'${null==e?"":" AND schema = ?"} AND name NOT LIKE 'sqlite_%' ORDER BY schema, name`,null==e?[]:[e])}async describeColumns({schema:e,table:t}={}){if(null==t)throw new Error("missing table");const n=await this.query(`SELECT name, type, "notnull" FROM pragma_table_info(?${null==e?"":", ?"}) ORDER BY cid`,null==e?[t]:[t,e]);if(!n.length)throw new Error(`table not found: ${t}`);return n.map((({name:e,type:t,notnull:n})=>({name:e,type:At(t),databaseType:t,nullable:!n})))}async describe(e){const t=await(void 0===e?this.query("SELECT name FROM sqlite_master WHERE type = 'table'"):this.query("SELECT * FROM pragma_table_info(?)",[e]));if(!t.length)throw new Error("Not found");const{columns:n}=t;return xt("table",{value:t},[xt("thead",[xt("tr",n.map((e=>xt("th",[Ct(e)]))))]),xt("tbody",t.map((e=>xt("tr",n.map((t=>xt("td",[Ct(e[t])])))))))])}async sql(){return this.query(...this.queryTag.apply(this,arguments))}queryTag(e,...t){return[e.join("?"),t]}}function At(e){switch(e){case"NULL":return"null";case"INT":case"INTEGER":case"TINYINT":case"SMALLINT":case"MEDIUMINT":case"BIGINT":case"UNSIGNED BIG INT":case"INT2":case"INT8":return"integer";case"TEXT":case"CLOB":case"DATE":case"DATETIME":return"string";case"REAL":case"DOUBLE":case"DOUBLE PRECISION":case"FLOAT":case"NUMERIC":return"number";case"BLOB":return"buffer";default:return/^(?:(?:(?:VARYING|NATIVE) )?CHARACTER|(?:N|VAR|NVAR)CHAR)\(/.test(e)?"string":/^(?:DECIMAL|NUMERIC)\(/.test(e)?"number":"other"}}function St(e){return"string"==typeof e?fetch(e).then(St):e instanceof Response||e instanceof Blob?e.arrayBuffer().then(St):e instanceof ArrayBuffer?new Uint8Array(e):e}function xt(e,t,n){2===arguments.length&&(n=t,t=void 0);const i=document.createElement(e);if(void 0!==t)for(const e in t)i[e]=t[e];if(void 0!==n)for(const e of n)i.appendChild(e);return i}function Ct(e){return document.createTextNode(e)}function Nt(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function kt(e,t=Nt){let n,i=!1;if(1===t.length){let r;for(const s of e){const e=t(s);(i?Nt(e,r)>0:0===Nt(e,e))&&(n=s,r=e,i=!0)}}else for(const r of e)(i?t(r,n)>0:0===t(r,r))&&(n=r,i=!0);return n}function Tt(e){return e&&"function"==typeof e.toArrowBuffer}function Pt(e){return e&&"function"==typeof e.getChild&&"function"==typeof e.toArray&&e.schema&&Array.isArray(e.schema.fields)}function jt(e){return{name:e.name,type:It(e.type),nullable:e.nullable,databaseType:String(e.type)}}function It(e){switch(e.typeId){case 2:return"integer";case 3:case 7:return"number";case 4:case 15:return"buffer";case 5:return"string";case 6:return"boolean";case 8:case 9:case 10:return"date";case 12:case 16:return"array";case 13:case 14:return"object";default:return"other"}}async function Rt(){return await import(`${gt}${Ke.resolve()}`)}Object.defineProperty(Et.prototype,"dialect",{value:"sqlite"});class Mt{constructor(e){Object.defineProperties(this,{_db:{value:e}})}async queryStream(e,t){const n=await this._db.connect();let i,r;try{if(t?.length>0){const r=await n.prepare(e);i=await r.send(...t)}else i=await n.send(e);if(r=await i.next(),r.done)throw new Error("missing first batch")}catch(e){throw await n.close(),e}return{schema:(s=r.value,s.schema.fields.map(jt)),async*readRows(){try{for(;!r.done;)yield r.value.toArray(),r=await i.next()}finally{await n.close()}}};var s}async query(e,t){const n=await this.queryStream(e,t),i=[];for await(const e of n.readRows())for(const t of e)i.push(t);return i.schema=n.schema,i}async queryRow(e,t){const n=(await this.queryStream(e,t)).readRows();try{const{done:e,value:t}=await n.next();return e||!t.length?null:t[0]}finally{await n.return()}}async sql(e,...t){return await this.query(e.join("?"),t)}queryTag(e,...t){return[e.join("?"),t]}escape(e){return`"${e}"`}async describeTables(){return(await this.query("SHOW TABLES")).map((({name:e})=>({name:e})))}async describeColumns({table:e}={}){return(await this.query(`DESCRIBE ${this.escape(e)}`)).map((({column_name:e,column_type:t,null:n})=>({name:e,type:Ut(t),nullable:"NO"!==n,databaseType:t})))}static async of(e={},t={}){const n=await async function(){void 0===wt&&(wt=async function(){const e=await import(`${gt}${tt.resolve()}`),t=await e.selectBundle({mvp:{mainModule:`${gt}${tt.resolve("dist/duckdb-mvp.wasm")}`,mainWorker:`${gt}${tt.resolve("dist/duckdb-browser-mvp.worker.js")}`},eh:{mainModule:`${gt}${tt.resolve("dist/duckdb-eh.wasm")}`,mainWorker:`${gt}${tt.resolve("dist/duckdb-browser-eh.worker.js")}`}}),n=new e.ConsoleLogger;return{module:e,bundle:t,logger:n}}());const{module:e,bundle:t,logger:n}=await wt,i=await e.createWorker(t.mainWorker),r=new e.AsyncDuckDB(n,i);return await r.instantiate(t.mainModule),r}();return void 0===t.query?.castTimestampToDate&&(t={...t,query:{...t.query,castTimestampToDate:!0}}),void 0===t.query?.castBigIntToDouble&&(t={...t,query:{...t.query,castBigIntToDouble:!0}}),await n.open(t),await Promise.all(Object.entries(e).map((async([e,t])=>{if(t instanceof Rn)await Ot(n,e,t);else if(Pt(t))await Dt(n,e,t);else if(Array.isArray(t))await Lt(n,e,t);else if(Tt(t))await async function(e,t,n){const i=(await Rt()).tableFromIPC(n.toArrowBuffer());return await Dt(e,t,i)}(n,e,t);else if("data"in t){const{data:i,...r}=t;Pt(i)?await Dt(n,e,i,r):await Lt(n,e,i,r)}else{if(!("file"in t))throw new Error(`invalid source: ${t}`);{const{file:i,...r}=t;await Ot(n,e,i,r)}}}))),new Mt(n)}}async function Ot(e,t,n,i){const r=await n.url();if(r.startsWith("blob:")){const t=await n.arrayBuffer();await e.registerFileBuffer(n.name,new Uint8Array(t))}else await e.registerFileURL(n.name,r,4);const s=await e.connect();try{switch(n.mimeType){case"text/csv":case"text/tab-separated-values":return await s.insertCSVFromPath(n.name,{name:t,schema:"main",...i}).catch((async e=>{if(e.toString().includes("Could not convert"))return await async function(e,t,n){const i=await e.prepare(`CREATE TABLE '${n}' AS SELECT * FROM read_csv_auto(?, ALL_VARCHAR=TRUE)`);return await i.send(t.name)}(s,n,t);throw e}));case"application/json":return await s.insertJSONFromPath(n.name,{name:t,schema:"main",...i});default:if(/\.arrow$/i.test(n.name)){const e=new Uint8Array(await n.arrayBuffer());return await s.insertArrowFromIPCStream(e,{name:t,schema:"main",...i})}if(/\.parquet$/i.test(n.name))return await s.query(`CREATE VIEW '${t}' AS SELECT * FROM parquet_scan('${n.name}')`);throw new Error(`unknown file type: ${n.mimeType}`)}}finally{await s.close()}}async function Dt(e,t,n,i){const r=await e.connect();try{await r.insertArrowTable(n,{name:t,schema:"main",...i})}finally{await r.close()}}async function Lt(e,t,n,i){const r=(await Rt()).tableFromJSON(n);return await Dt(e,t,r,i)}function Ut(e){switch(e){case"BIGINT":case"HUGEINT":case"UBIGINT":return"bigint";case"DOUBLE":case"REAL":case"FLOAT":return"number";case"INTEGER":case"SMALLINT":case"TINYINT":case"USMALLINT":case"UINTEGER":case"UTINYINT":return"integer";case"BOOLEAN":return"boolean";case"DATE":case"TIMESTAMP":case"TIMESTAMP WITH TIME ZONE":return"date";case"VARCHAR":case"UUID":return"string";default:return/^DECIMAL\(/.test(e)?"integer":"other"}}Object.defineProperty(Mt.prototype,"dialect",{value:"duckdb"});const qt=20;function Bt(e){return Array.isArray(e)&&(Ht(e.schema)||Ft(e.columns)||function(e){const t=Math.min(qt,e.length);for(let n=0;n<t;++n){const t=e[n];if(null===t||"object"!=typeof t)return!1}return t>0&&function(e){for(const t in e)return!0;return!1}(e[0])}(e)||Jt(e)||Vt(e))||Gt(e)}function Ht(e){return Array.isArray(e)&&e.every(zt)}function Ft(e){return Array.isArray(e)&&e.every((e=>"string"==typeof e))}function zt(e){return e&&"string"==typeof e.name&&"string"==typeof e.type}function Wt(e){return Gt(e)||Jt(e)||Vt(e)}function Jt(e){const t=Math.min(qt,e.length);if(!(t>0))return!1;let n,i=!1;for(let r=0;r<t;++r){const t=e[r];if(null==t)continue;const s=typeof t;if(void 0===n)switch(s){case"number":case"boolean":case"string":case"bigint":n=s;break;default:return!1}else if(s!==n)return!1;i=!0}return i}function Vt(e){const t=Math.min(qt,e.length);if(!(t>0))return!1;let n=!1;for(let i=0;i<t;++i){const t=e[i];if(null!=t){if(!(t instanceof Date))return!1;n=!0}}return n}function Gt(e){return e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array}const Kt=Object.assign((async(e,t,n,i)=>{if(e=await Zt(await e,i),(r=e)&&("function"==typeof r.sql||"function"==typeof r.queryTag&&("function"==typeof r.query||"function"==typeof r.queryStream))&&("table"!==s||"function"==typeof r.describeColumns)&&r!==Kt)return en(e,function(e,t){const n="function"==typeof t.escape?t.escape:e=>e,{select:i,from:r,filter:s,sort:o,slice:a}=e;if(!r.table)throw new Error("missing from table");if(i.columns&&0===i.columns.length)throw new Error("at least one column must be selected");const l=new Map(e.names?.map((({column:e,name:t})=>[e,t]))),c=i.columns?i.columns.map((e=>{const t=l.get(e);return t?`${n(e)} AS ${n(t)}`:n(e)})).join(", "):"*",u=[[`SELECT ${c} FROM ${tn(r.table,n)}`]];for(let e=0;e<s.length;++e)nn(e?"\nAND ":"\nWHERE ",u),sn(s[e],u,n);for(let e=0;e<o.length;++e)nn(e?", ":"\nORDER BY ",u),rn(o[e],u,n);if("mssql"===t.dialect||"oracle"===t.dialect){if(null!==a.to||null!==a.from){if(!o.length){if(!i.columns)throw new Error("at least one column must be explicitly specified. Received '*'.");nn("\nORDER BY ",u),rn({column:i.columns[0],direction:"ASC"},u,n)}nn(`\nOFFSET ${a.from||0} ROWS`,u),nn(`\nFETCH NEXT ${null!==a.to?a.to-(a.from||0):1e9} ROWS ONLY`,u)}}else null===a.to&&null===a.from||nn("\nLIMIT "+(null!==a.to?a.to-(a.from||0):1e9),u),null!==a.from&&nn(` OFFSET ${a.from}`,u);return u}(t,e),n);var r,s;if(Bt(e))return function(e,t){const n=e;let{schema:i,columns:r}=e,s=!1;Ht(i)||(i=Sn(e,Ft(r)?r:void 0),s=!0);const o=new Map(i.map((({name:e,type:t})=>[e,t])));if(t.types){for(const{name:e,type:r}of t.types){o.set(e,r),i===n.schema&&(i=i.slice());const t=i.findIndex((t=>t.name===e));t>-1&&(i[t]={...i[t],type:r})}e=e.map((e=>En(e,o,i)))}else s&&(e=e.map((e=>En(e,o,i))));for(const{type:n,operands:i}of t.filter){const[{value:t}]=i,r=i.slice(1).map((({value:e})=>e));switch(n){case"v":{const[n]=r,i=wn(n);e=e.filter((e=>i(e[t])));break}case"nv":{const[n]=r,i=wn(n);e=e.filter((e=>!i(e[t])));break}case"eq":{const[n]=r;if(n instanceof Date){const i=+n;e=e.filter((e=>+e[t]===i))}else e=e.filter((e=>e[t]===n));break}case"ne":{const[n]=r;e=e.filter((e=>e[t]!==n));break}case"c":{const[n]=r;e=e.filter((e=>"string"==typeof e[t]&&e[t].includes(n)));break}case"nc":{const[n]=r;e=e.filter((e=>"string"==typeof e[t]&&!e[t].includes(n)));break}case"in":{const n=new Set(r);e=e.filter((e=>n.has(e[t])));break}case"nin":{const n=new Set(r);e=e.filter((e=>!n.has(e[t])));break}case"n":e=e.filter((e=>null==e[t]));break;case"nn":e=e.filter((e=>null!=e[t]));break;case"lt":{const[n]=r;e=e.filter((e=>e[t]<n));break}case"lte":{const[n]=r;e=e.filter((e=>e[t]<=n));break}case"gt":{const[n]=r;e=e.filter((e=>e[t]>n));break}case"gte":{const[n]=r;e=e.filter((e=>e[t]>=n));break}default:throw new Error(`unknown filter type: ${n}`)}}for(const{column:i,direction:r}of function(e){if("function"!=typeof e[Symbol.iterator])throw new TypeError("values is not iterable");return Array.from(e).reverse()}(t.sort)){const t="desc"===r?cn:ln;e===n&&(e=e.slice()),e.sort(((e,n)=>t(e[i],n[i])))}let{from:a,to:l}=t.slice;a=null==a?0:Math.max(0,a),l=null==l?1/0:Math.max(0,l),(a>0||l<1/0)&&(e=e.slice(Math.max(0,a),Math.max(0,l)));if(t.select.columns){if(i){const e=new Map(i.map((e=>[e.name,e])));i=t.select.columns.map((t=>e.get(t)))}r&&(r=t.select.columns),e=e.map((e=>Object.fromEntries(t.select.columns.map((t=>[t,e[t]])))))}if(t.names){const n=new Map(t.names.map((e=>[e.column,e])));i&&(i=i.map((e=>{const t=n.get(e.name);return{...e,...t?{name:t.name}:null}}))),r&&(r=r.map((e=>{const t=n.get(e);return t?.name??e}))),e=e.map((e=>Object.fromEntries(Object.keys(e).map((t=>{const i=n.get(t);return[i?.name??t,e[t]]})))))}e!==n&&(i&&(e.schema=i),r&&(e.columns=r));return e}(e,t);if(!e)throw new Error("missing data source");throw new Error("invalid data source")}),{sql:(e,t,n)=>async function(){return en(await Xt(await e,n),arguments,t)}});function Yt(e){const t=new WeakMap;return(n,i)=>{if(!n)throw new Error("data source not found");let r=t.get(n);return(!r||Bt(n)&&n.length!==r._numRows)&&(r=e(n,i),r._numRows=n.length,t.set(n,r)),r}}const Zt=Yt((async(e,t)=>{if(e instanceof Rn){switch(e.mimeType){case"text/csv":return e.csv();case"text/tab-separated-values":return e.tsv();case"application/json":return e.json();case"application/x-sqlite3":return e.sqlite()}if(/\.(arrow|parquet)$/i.test(e.name))return Qt(e,t);throw new Error(`unsupported file type: ${e.mimeType}`)}return Pt(e)||Tt(e)?Qt(e,t):Bt(e)&&Wt(e)?Array.from(e,(e=>({value:e}))):e})),Xt=Yt((async(e,t)=>{if(e instanceof Rn){switch(e.mimeType){case"text/csv":case"text/tab-separated-values":case"application/json":return Qt(e,t);case"application/x-sqlite3":return e.sqlite()}if(/\.(arrow|parquet)$/i.test(e.name))return Qt(e,t);throw new Error(`unsupported file type: ${e.mimeType}`)}return Bt(e)?Qt(await async function(e,t){const n=await Rt();return Wt(e)?n.tableFromArrays({[t]:e}):n.tableFromJSON(e)}(e,t),t):Pt(e)||Tt(e)?Qt(e,t):e}));function Qt(e,t=(e instanceof Rn?function(e){return e.name.replace(/@\d+(?=\.|$)/,"").replace(/\.\w+$/,"")}(e):"__table")){return Mt.of({[t]:e})}async function en(e,t,n){if(!e)throw new Error("missing data source");if("function"==typeof e.queryTag){const i=new AbortController,r={signal:i.signal};if(n.then((()=>i.abort("invalidated"))),"function"==typeof e.queryStream)return async function*(e){let t=performance.now();const n=await e,i=[];i.done=!1,i.error=null,i.schema=n.schema;try{for await(const e of n.readRows()){performance.now()-t>150&&i.length>0&&(yield i,t=performance.now());for(const t of e)i.push(t)}i.done=!0,yield i}catch(e){i.error=e,yield i}}(e.queryStream(...e.queryTag.apply(e,t),r));if("function"==typeof e.query)return e.query(...e.queryTag.apply(e,t),r)}if("function"==typeof e.sql)return e.sql.apply(e,t);throw new Error("source does not implement query, queryStream, or sql")}function tn(e,t){if("object"==typeof e){let n="";return null!=e.database&&(n+=t(e.database)+"."),null!=e.schema&&(n+=t(e.schema)+"."),n+=t(e.table),n}return t(e)}function nn(e,t){const n=t[0];n[n.length-1]+=e}function rn({column:e,direction:t},n,i){nn(`${i(e)} ${t.toUpperCase()}`,n)}function sn({type:e,operands:t},n,i){if(t.length<1)throw new Error("Invalid operand length");if(1===t.length||"v"===e||"nv"===e)switch(on(t[0],n,i),e){case"n":case"nv":return void nn(" IS NULL",n);case"nn":case"v":return void nn(" IS NOT NULL",n);default:throw new Error("Invalid filter operation")}if(2!==t.length||["in","nin"].includes(e)){var r;switch(on(t[0],n,i),e){case"in":nn(" IN (",n);break;case"nin":nn(" NOT IN (",n);break;default:throw new Error("Invalid filter operation")}!function(e,t){let n=!0;for(const i of e)n?n=!1:nn(",",t),t.push(i.value),t[0].push("")}(t.slice(1),n),nn(")",n)}else{if(["c","nc"].includes(e)){switch(on(t[0],n,i),e){case"c":nn(" LIKE ",n);break;case"nc":nn(" NOT LIKE ",n)}return void on((r=t[1],{...r,value:`%${r.value}%`}),n,i)}switch(on(t[0],n,i),e){case"eq":nn(" = ",n);break;case"ne":nn(" <> ",n);break;case"gt":nn(" > ",n);break;case"lt":nn(" < ",n);break;case"gte":nn(" >= ",n);break;case"lte":nn(" <= ",n);break;default:throw new Error("Invalid filter operation")}on(t[1],n,i)}}function on(e,t,n){"column"===e.type?nn(n(e.value),t):(t.push(e.value),t[0].push(""))}function an(e,t){return(null==e||!(e>=e))-(null==t||!(t>=t))}function ln(e,t){return an(e,t)||(e<t?-1:e>t?1:0)}function cn(e,t){return an(e,t)||(e>t?-1:e<t?1:0)}const un=e=>"number"==typeof e&&!Number.isNaN(e),dn=e=>Number.isInteger(e)&&!Number.isNaN(e),fn=e=>"string"==typeof e,hn=e=>"boolean"==typeof e,pn=e=>"bigint"==typeof e,mn=e=>e instanceof Date&&!isNaN(e),vn=e=>e instanceof ArrayBuffer,yn=e=>Array.isArray(e),bn=e=>"object"==typeof e&&null!==e,gn=e=>null!=e;function wn(e){switch(e){case"string":return fn;case"bigint":return pn;case"boolean":return hn;case"number":return un;case"integer":return dn;case"date":return mn;case"buffer":return vn;case"array":return yn;case"object":return bn;default:return gn}}const _n=/^(([-+]\d{2})?\d{4}(-\d{2}(-\d{2}))|(\d{1,2})\/(\d{1,2})\/(\d{2,4}))([T ]\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/;function $n(e,t){switch(t){case"string":return"string"==typeof e||null==e?e:String(e);case"boolean":if("string"==typeof e){const t=e.trim().toLowerCase();return"true"===t||"false"!==t&&null}return"boolean"==typeof e||null==e?e:Boolean(e);case"bigint":return"bigint"==typeof e||null==e?e:Number.isInteger("string"!=typeof e||e.trim()?+e:NaN)?BigInt(e):void 0;case"integer":case"number":return"number"==typeof e?e:null==e||"string"==typeof e&&!e.trim()?NaN:Number(e);case"date":{if(e instanceof Date||null==e)return e;if("number"==typeof e)return new Date(e);const t=String(e).trim();return"string"!=typeof e||t?new Date(_n.test(t)?t:NaN):null}case"array":case"object":case"buffer":case"other":return e;default:throw new Error(`Unable to coerce to type: ${t}`)}}function En(e,t,n){const i={};for(const r of n){const n=t.get(r.name),s=e[r.name];i[r.name]="raw"===n?s:$n(s,n)}return i}const An=["boolean","integer","number","date","bigint","array","object","buffer"];function Sn(e,t=function(e){const t=new Set;for(const n of e)if(n)for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t.add(e);return Array.from(t)}(e)){const n=[],i=e.slice(0,100);for(const e of t){const t={boolean:0,integer:0,number:0,date:0,string:0,array:0,object:0,bigint:0,buffer:0,defined:0};for(const n of i){let i=n[e];if(null==i)continue;const r=typeof i;if("string"!==r)++t.defined,Array.isArray(i)?++t.array:i instanceof Date?++t.date:i instanceof ArrayBuffer?++t.buffer:"number"===r?(++t.number,Number.isInteger(i)&&++t.integer):r in t&&++t[r];else{if(i=i.trim(),!i)continue;++t.defined,++t.string,/^(true|false)$/i.test(i)?++t.boolean:i&&!isNaN(i)?(++t.number,Number.isInteger(+i)&&++t.integer):_n.test(i)&&++t.date}}const r=Math.max(1,.9*t.defined),s=kt(An,(e=>t[e]>=r?t[e]:NaN))??(t.string>=r?"string":"other");n.push({name:e,type:s,inferred:s})}return n}class xn{constructor(e){Object.defineProperties(this,{_:{value:e},sheetNames:{value:e.worksheets.map((e=>e.name)),enumerable:!0}})}sheet(e,t){const n="number"==typeof e?this.sheetNames[e]:this.sheetNames.includes(e+="")?e:null;if(null==n)throw new Error(`Sheet not found: ${e}`);return function(e,{range:t,headers:n}={}){let[[i,r],[s,o]]=function(e=":",{columnCount:t,rowCount:n}){if(!(e+="").match(/^[A-Z]*\d*:[A-Z]*\d*$/))throw new Error("Malformed range specifier");const[[i=0,r=0],[s=t-1,o=n-1]]=e.split(":").map(Tn);return[[i,r],[s,o]]}(t,e);const a=n?e._rows[r++]:null;let l=new Set(["#"]);for(let e=i;e<=s;e++){const t=a?Cn(a.findCell(e+1)):null;let n=t&&t+""||kn(e);for(;l.has(n);)n+="_";l.add(n)}l=new Array(i).concat(Array.from(l));const c=new Array(o-r+1);for(let t=r;t<=o;t++){const n=c[t-r]=Object.create(null,{"#":{value:t+1}}),o=e.getRow(t+1);if(o.hasValues)for(let e=i;e<=s;e++){const t=Cn(o.findCell(e+1));null!=t&&(n[l[e+1]]=t)}}return c.columns=l.filter((()=>!0)),c}(this._.getWorksheet(n),t)}}function Cn(e){if(!e)return;const{value:t}=e;if(t&&"object"==typeof t&&!(t instanceof Date)){if(t.formula||t.sharedFormula)return t.result&&t.result.error?NaN:t.result;if(t.richText)return Nn(t);if(t.text){let{text:e}=t;return e.richText&&(e=Nn(e)),t.hyperlink&&t.hyperlink!==e?`${t.hyperlink} ${e}`:e}return t}return t}function Nn(e){return e.richText.map((e=>e.text)).join("")}function kn(e){let t="";e++;do{t=String.fromCharCode(64+(e%26||26))+t}while(e=Math.floor((e-1)/26));return t}function Tn(e){const[,t,n]=e.match(/^([A-Z]*)(\d*)$/);let i=0;if(t)for(let e=0;e<t.length;e++)i+=Math.pow(26,t.length-e-1)*(t.charCodeAt(e)-64);return[i?i-1:void 0,n?+n-1:void 0]}async function Pn(e){const t=await fetch(await e.url());if(!t.ok)throw new Error(`Unable to load file: ${e.name}`);return t}async function jn(e,t,{array:n=!1,typed:i=!1}={}){const r=await e.text(),s="\t"===t?n?ke:Ne:n?xe:Se;if("auto"===i&&!n){const e=s(r);return function(e,t){const n=new Map(t.map((({name:e,type:t})=>[e,t])));return Object.assign(e.map((e=>En(e,n,t))),{schema:t})}(e,Sn(e,e.columns))}return s(r,i&&Te)}class In{constructor(e,t){Object.defineProperty(this,"name",{value:e,enumerable:!0}),void 0!==t&&Object.defineProperty(this,"mimeType",{value:t+"",enumerable:!0})}async blob(){return(await Pn(this)).blob()}async arrayBuffer(){return(await Pn(this)).arrayBuffer()}async text(){return(await Pn(this)).text()}async json(){return(await Pn(this)).json()}async stream(){return(await Pn(this)).body}async csv(e){return jn(this,",",e)}async tsv(e){return jn(this,"\t",e)}async image(e){const t=await this.url();return new Promise(((n,i)=>{const r=new Image;new URL(t,document.baseURI).origin!==new URL(location).origin&&(r.crossOrigin="anonymous"),Object.assign(r,e),r.onload=()=>n(r),r.onerror=()=>i(new Error(`Unable to load file: ${this.name}`)),r.src=t}))}async arrow({version:e=4}={}){switch(e){case 4:{const[e,t]=await Promise.all([_t(Ve.resolve()),Pn(this)]);return e.Table.from(t)}case 9:{const[e,t]=await Promise.all([import(`${gt}${Ge.resolve()}`),Pn(this)]);return e.tableFromIPC(t)}case 11:{const[e,t]=await Promise.all([import(`${gt}${Ke.resolve()}`),Pn(this)]);return e.tableFromIPC(t)}default:throw new Error(`unsupported arrow version: ${e}`)}}async sqlite(){return Et.open(Pn(this))}async zip(){const[e,t]=await Promise.all([_t(Be.resolve()),this.arrayBuffer()]);return new On(await e.loadAsync(t))}async xml(e="application/xml"){return(new DOMParser).parseFromString(await this.text(),e)}async html(){return this.xml("text/html")}async xlsx(){const[e,t]=await Promise.all([_t(Xe.resolve()),this.arrayBuffer()]);return new xn(await(new e.Workbook).xlsx.load(t))}}let Rn=class extends In{constructor(e,t,n){super(t,n),Object.defineProperty(this,"_url",{value:e})}async url(){return await this._url+""}};function Mn(e){throw new Error(`File not found: ${e}`)}class On{constructor(e){Object.defineProperty(this,"_",{value:e}),this.filenames=Object.keys(e.files).filter((t=>!e.files[t].dir))}file(e){const t=this._.file(e+="");if(!t||t.dir)throw new Error(`file not found: ${e}`);return new Dn(t)}}class Dn extends In{constructor(e){super(e.name),Object.defineProperty(this,"_",{value:e}),Object.defineProperty(this,"_url",{writable:!0})}async url(){return this._url||(this._url=this.blob().then(URL.createObjectURL))}async blob(){return this._.async("blob")}async arrayBuffer(){return this._.async("arraybuffer")}async text(){return this._.async("text")}async json(){return JSON.parse(await this.text())}}var Ln={math:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};var Un=0;function qn(e){return new Bn("O-"+(null==e?"":e+"-")+ ++Un)}function Bn(e){this.id=e,this.href=new URL(`#${e}`,location)+""}Bn.prototype.toString=function(){return"url("+this.href+")"};var Hn=Object.freeze({__proto__:null,canvas:function(e,t){var n=document.createElement("canvas");return n.width=e,n.height=t,n},context2d:function(e,t,n){null==n&&(n=devicePixelRatio);var i=document.createElement("canvas");i.width=e*n,i.height=t*n,i.style.width=e+"px";var r=i.getContext("2d");return r.scale(n,n),r},download:function(e,t="untitled",n="Save"){const i=document.createElement("a"),r=i.appendChild(document.createElement("button"));async function s(){await new Promise(requestAnimationFrame),URL.revokeObjectURL(i.href),i.removeAttribute("href"),r.textContent=n,r.disabled=!1}return r.textContent=n,i.download=t,i.onclick=async t=>{if(r.disabled=!0,i.href)return s();r.textContent="Saving";try{const t=await("function"==typeof e?e():e);r.textContent="Download",i.href=URL.createObjectURL(t)}catch(e){r.textContent=n}if(t.eventPhase)return s();r.disabled=!1},i},element:function(e,t){var n,i=e+="",r=i.indexOf(":");r>=0&&"xmlns"!==(i=e.slice(0,r))&&(e=e.slice(r+1));var s=Ln.hasOwnProperty(i)?document.createElementNS(Ln[i],e):document.createElement(e);if(t)for(var o in t)r=(i=o).indexOf(":"),n=t[o],r>=0&&"xmlns"!==(i=o.slice(0,r))&&(o=o.slice(r+1)),Ln.hasOwnProperty(i)?s.setAttributeNS(Ln[i],o,n):s.setAttribute(o,n);return s},input:function(e){var t=document.createElement("input");return null!=e&&(t.type=e),t},range:function(e,t,n){1===arguments.length&&(t=e,e=null);var i=document.createElement("input");return i.min=e=null==e?0:+e,i.max=t=null==t?1:+t,i.step=null==n?"any":n=+n,i.type="range",i},select:function(e){var t=document.createElement("select");return Array.prototype.forEach.call(e,(function(e){var n=document.createElement("option");n.value=n.textContent=e,t.appendChild(n)})),t},svg:function(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");return n.setAttribute("viewBox",[0,0,e,t]),n.setAttribute("width",e),n.setAttribute("height",t),n},text:function(e){return document.createTextNode(e)},uid:qn});var Fn=Object.freeze({__proto__:null,buffer:function(e){return new Promise((function(t,n){var i=new FileReader;i.onload=function(){t(i.result)},i.onerror=n,i.readAsArrayBuffer(e)}))},text:function(e){return new Promise((function(t,n){var i=new FileReader;i.onload=function(){t(i.result)},i.onerror=n,i.readAsText(e)}))},url:function(e){return new Promise((function(t,n){var i=new FileReader;i.onload=function(){t(i.result)},i.onerror=n,i.readAsDataURL(e)}))}});function zn(){return this}function Wn(e,t){let n=!1;if("function"!=typeof t)throw new Error("dispose is not a function");return{[Symbol.iterator]:zn,next:()=>n?{done:!0}:(n=!0,{done:!1,value:e}),return:()=>(n=!0,t(e),{done:!0}),throw:()=>({done:n=!0})}}function Jn(e){let t,n,i=!1;const r=e((function(e){n?(n(e),n=null):i=!0;return t=e}));if(null!=r&&"function"!=typeof r)throw new Error("function"==typeof r.then?"async initializers are not supported":"initializer returned something, but not a dispose function");return{[Symbol.iterator]:zn,throw:()=>({done:!0}),return:()=>(null!=r&&r(),{done:!0}),next:function(){return{done:!1,value:i?(i=!1,Promise.resolve(t)):new Promise((e=>n=e))}}}}function Vn(e){switch(e.type){case"range":case"number":return e.valueAsNumber;case"date":return e.valueAsDate;case"checkbox":return e.checked;case"file":return e.multiple?e.files:e.files[0];case"select-multiple":return Array.from(e.selectedOptions,(e=>e.value));default:return e.value}}var Gn=Object.freeze({__proto__:null,disposable:Wn,filter:function*(e,t){for(var n,i=-1;!(n=e.next()).done;)t(n.value,++i)&&(yield n.value)},input:function(e){return Jn((function(t){var n=function(e){switch(e.type){case"button":case"submit":case"checkbox":return"click";case"file":return"change";default:return"input"}}(e),i=Vn(e);function r(){t(Vn(e))}return e.addEventListener(n,r),void 0!==i&&t(i),function(){e.removeEventListener(n,r)}}))},map:function*(e,t){for(var n,i=-1;!(n=e.next()).done;)yield t(n.value,++i)},observe:Jn,queue:function(e){let t;const n=[],i=e((function(e){n.push(e),t&&(t(n.shift()),t=null);return e}));if(null!=i&&"function"!=typeof i)throw new Error("function"==typeof i.then?"async initializers are not supported":"initializer returned something, but not a dispose function");return{[Symbol.iterator]:zn,throw:()=>({done:!0}),return:()=>(null!=i&&i(),{done:!0}),next:function(){return{done:!1,value:n.length?Promise.resolve(n.shift()):new Promise((e=>t=e))}}}},range:function*(e,t,n){e=+e,t=+t,n=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+n;for(var i=-1,r=0|Math.max(0,Math.ceil((t-e)/n));++i<r;)yield e+i*n},valueAt:function(e,t){if(!(!isFinite(t=+t)||t<0||t!=t|0))for(var n,i=-1;!(n=e.next()).done;)if(++i===t)return n.value},worker:function(e){const t=URL.createObjectURL(new Blob([e],{type:"text/javascript"})),n=new Worker(t);return Wn(n,(()=>{n.terminate(),URL.revokeObjectURL(t)}))}});function Kn(e,t){return function(n){var i,r,s,o,a,l,c,u,d=n[0],f=[],h=null,p=-1;for(a=1,l=arguments.length;a<l;++a){if((i=arguments[a])instanceof Node)f[++p]=i,d+="\x3c!--o:"+p+"--\x3e";else if(Array.isArray(i)){for(c=0,u=i.length;c<u;++c)(r=i[c])instanceof Node?(null===h&&(f[++p]=h=document.createDocumentFragment(),d+="\x3c!--o:"+p+"--\x3e"),h.appendChild(r)):(h=null,d+=r);h=null}else d+=i;d+=n[a]}if(h=e(d),++p>0){for(s=new Array(p),o=document.createTreeWalker(h,NodeFilter.SHOW_COMMENT,null,!1);o.nextNode();)r=o.currentNode,/^o:/.test(r.nodeValue)&&(s[+r.nodeValue.slice(2)]=r);for(a=0;a<p;++a)(r=s[a])&&r.parentNode.replaceChild(f[a],r)}return 1===h.childNodes.length?h.removeChild(h.firstChild):11===h.nodeType?((r=t()).appendChild(h),r):h}}const Yn=Kn((function(e){var t=document.createElement("template");return t.innerHTML=e.trim(),document.importNode(t.content,!0)}),(function(){return document.createElement("span")}));function Zn(e){let t;Object.defineProperties(this,{generator:{value:Jn((e=>{t=e}))},value:{get:()=>e,set:n=>t(e=n)}}),void 0!==e&&t(e)}function*Xn(){for(;;)yield Date.now()}var Qn=new Map;function ei(e,t){var n;return(n=Qn.get(e=+e))?n.then((()=>t)):(n=Date.now())>=e?Promise.resolve(t):function(e,t){var n=new Promise((function(n){Qn.delete(t);var i=t-e;if(!(i>0))throw new Error("invalid time");if(i>2147483647)throw new Error("too long to wait");setTimeout(n,i)}));return Qn.set(t,n),n}(n,e).then((()=>t))}var ti=Object.freeze({__proto__:null,delay:function(e,t){return new Promise((function(n){setTimeout((function(){n(t)}),e)}))},tick:function(e,t){return ei(Math.ceil((Date.now()+1)/e)*e,t)},when:ei});function ni(e,t){if(/^(\w+:)|\/\//i.test(e))return e;if(/^[.]{0,2}\//i.test(e))return new URL(e,t??location).href;if(!e.length||/^[\s._]/.test(e)||/\s$/.test(e))throw new Error("illegal name");return"https://unpkg.com/"+e}const ii=Kn((function(e){var t=document.createElementNS("http://www.w3.org/2000/svg","g");return t.innerHTML=e.trim(),t}),(function(){return document.createElementNS("http://www.w3.org/2000/svg","g")}));var ri=String.raw;function si(e){return new Promise((function(t,n){var i=document.createElement("link");i.rel="stylesheet",i.href=e,i.onerror=n,i.onload=t,document.head.appendChild(i)}))}function oi(){return Jn((function(e){var t=e(document.body.clientWidth);function n(){var n=document.body.clientWidth;n!==t&&e(t=n)}return window.addEventListener("resize",n),function(){window.removeEventListener("resize",n)}}))}const ai=Object.assign(Object.defineProperties((function(e){const t=function(e){return null==e?_t:pt(e)}(e);var n;Object.defineProperties(this,(n={FileAttachment:()=>Mn,Mutable:()=>Zn,now:Xn,width:oi,dot:()=>t(Oe.resolve()),htl:()=>t(qe.resolve()),html:()=>Yn,md:()=>function(e){return e(He.resolve()).then((function(t){return Kn((function(n){var i=document.createElement("div");i.innerHTML=t(n,{langPrefix:""}).trim();var r=i.querySelectorAll("pre code[class]");return r.length>0&&e(De.resolve()).then((function(t){r.forEach((function(n){function i(){t.highlightBlock(n),n.parentNode.classList.add("observablehq--md-pre")}t.getLanguage(n.className)?i():e(De.resolve("async-languages/index.js")).then((i=>{if(i.has(n.className))return e(De.resolve("async-languages/"+i.get(n.className))).then((e=>{t.registerLanguage(n.className,e)}))})).then(i,i)}))})),i}),(function(){return document.createElement("div")}))}))}(t),svg:()=>ii,tex:()=>function(e){return Promise.all([e(Le.resolve()),e.resolve(Le.resolve("dist/katex.min.css")).then(si)]).then((function(e){var t=e[0],n=i();function i(e){return function(){var n=document.createElement("div");return t.render(ri.apply(String,arguments),n,e),n.removeChild(n.firstChild)}}return n.options=i,n.block=i({displayMode:!0}),n}))}(t),_:()=>t(Ue.resolve()),aq:()=>t.alias({"apache-arrow":Ve.resolve()})(Ye.resolve()),Arrow:()=>t(Ve.resolve()),d3:()=>t(Ie.resolve()),DuckDBClient:()=>Mt,Inputs:()=>t(Re.resolve()).then((e=>({...e,file:e.fileOf(In)}))),L:()=>async function(e){const t=await e(et.resolve());if(!t._style){const n=document.createElement("link");n.rel="stylesheet",n.href=await e.resolve(et.resolve("dist/leaflet.css")),t._style=document.head.appendChild(n)}return t}(t),mermaid:()=>async function(e){const t=await e(Qe.resolve());return t.initialize({securityLevel:"loose",theme:"neutral"}),function(){const e=document.createElement("div");return e.innerHTML=t.render(qn().id,String.raw.apply(String,arguments)),e.removeChild(e.firstChild)}}(t),Plot:()=>t(Me.resolve()),__query:()=>Kt,require:()=>t,resolve:()=>ni,SQLite:()=>$t(t),SQLiteDatabaseClient:()=>Et,topojson:()=>t(Ze.resolve()),vl:()=>async function(e){const[t,n,i]=await Promise.all([ze,We,Je].map((t=>e(t.resolve()))));return i.register(t,n)}(t),aapl:()=>new Rn("https://static.observableusercontent.com/files/3ccff97fd2d93da734e76829b2b066eafdaac6a1fafdec0faf6ebc443271cfc109d29e80dd217468fcb2aff1e6bffdc73f356cc48feb657f35378e6abbbb63b9").csv({typed:!0}),alphabet:()=>new Rn("https://static.observableusercontent.com/files/75d52e6c3130b1cae83cda89305e17b50f33e7420ef205587a135e8562bcfd22e483cf4fa2fb5df6dff66f9c5d19740be1cfaf47406286e2eb6574b49ffc685d").csv({typed:!0}),cars:()=>new Rn("https://static.observableusercontent.com/files/048ec3dfd528110c0665dfa363dd28bc516ffb7247231f3ab25005036717f5c4c232a5efc7bb74bc03037155cb72b1abe85a33d86eb9f1a336196030443be4f6").csv({typed:!0}),citywages:()=>new Rn("https://static.observableusercontent.com/files/39837ec5121fcc163131dbc2fe8c1a2e0b3423a5d1e96b5ce371e2ac2e20a290d78b71a4fb08b9fa6a0107776e17fb78af313b8ea70f4cc6648fad68ddf06f7a").csv({typed:!0}),diamonds:()=>new Rn("https://static.observableusercontent.com/files/87942b1f5d061a21fa4bb8f2162db44e3ef0f7391301f867ab5ba718b225a63091af20675f0bfe7f922db097b217b377135203a7eab34651e21a8d09f4e37252").csv({typed:!0}),flare:()=>new Rn("https://static.observableusercontent.com/files/a6b0d94a7f5828fd133765a934f4c9746d2010e2f342d335923991f31b14120de96b5cb4f160d509d8dc627f0107d7f5b5070d2516f01e4c862b5b4867533000").csv({typed:!0}),industries:()=>new Rn("https://static.observableusercontent.com/files/76f13741128340cc88798c0a0b7fa5a2df8370f57554000774ab8ee9ae785ffa2903010cad670d4939af3e9c17e5e18e7e05ed2b38b848ac2fc1a0066aa0005f").csv({typed:!0}),miserables:()=>new Rn("https://static.observableusercontent.com/files/31d904f6e21d42d4963ece9c8cc4fbd75efcbdc404bf511bc79906f0a1be68b5a01e935f65123670ed04e35ca8cae3c2b943f82bf8db49c5a67c85cbb58db052").json(),olympians:()=>new Rn("https://static.observableusercontent.com/files/31ca24545a0603dce099d10ee89ee5ae72d29fa55e8fc7c9ffb5ded87ac83060d80f1d9e21f4ae8eb04c1e8940b7287d179fe8060d887fb1f055f430e210007c").csv({typed:!0}),penguins:()=>new Rn("https://static.observableusercontent.com/files/715db1223e067f00500780077febc6cebbdd90c151d3d78317c802732252052ab0e367039872ab9c77d6ef99e5f55a0724b35ddc898a1c99cb14c31a379af80a").csv({typed:!0}),weather:()=>new Rn("https://static.observableusercontent.com/files/693a46b22b33db0f042728700e0c73e836fa13d55446df89120682d55339c6db7cc9e574d3d73f24ecc9bc7eb9ac9a1e7e104a1ee52c00aab1e77eb102913c1f").csv({typed:!0}),DOM:Hn,Files:Fn,Generators:Gn,Promises:ti},Object.fromEntries(Object.entries(n).map(li))))}),{resolve:{get:()=>_t.resolve,enumerable:!0,configurable:!0},require:{get:()=>_t,set:function(e){_t=e},enumerable:!0,configurable:!0}}),{resolveFrom:ft,requireFrom:pt});function li([e,t]){return[e,{value:t,writable:!0,enumerable:!0}]}class ci extends Error{constructor(e,t){super(e),this.input=t}}function ui(e){return()=>e}function di(e){return e}ci.prototype.name="RuntimeError";const fi=Array.prototype.map;function hi(){}const pi=1,mi=2,vi=3,yi=Symbol("no-observer");function bi(e,t,n){var i;n||(n=yi),Object.defineProperties(this,{_observer:{value:n,writable:!0},_definition:{value:_i,writable:!0},_duplicate:{value:void 0,writable:!0},_duplicates:{value:void 0,writable:!0},_indegree:{value:NaN,writable:!0},_inputs:{value:[],writable:!0},_invalidate:{value:hi,writable:!0},_module:{value:t},_name:{value:null,writable:!0},_outputs:{value:new Set,writable:!0},_promise:{value:Promise.resolve(void 0),writable:!0},_reachable:{value:n!==yi,writable:!0},_rejector:{value:(i=this,e=>{if(e===$i)throw e;if(e===_i)throw new ci(`${i._name} is not defined`,i._name);if(e instanceof Error&&e.message)throw new ci(e.message,i._name);throw new ci(`${i._name} could not be resolved`,i._name)})},_type:{value:e},_value:{value:void 0,writable:!0},_version:{value:0,writable:!0}})}function gi(e){e._module._runtime._dirty.add(e),e._outputs.add(this)}function wi(e){e._module._runtime._dirty.add(e),e._outputs.delete(this)}function _i(){throw _i}function $i(){throw $i}function Ei(e){return()=>{throw new ci(`${e} is defined more than once`)}}function Ai(e,t,n){const i=this._module._scope,r=this._module._runtime;if(this._inputs.forEach(wi,this),t.forEach(gi,this),this._inputs=t,this._definition=n,this._value=void 0,n===hi?r._variables.delete(this):r._variables.add(this),e!==this._name||i.get(e)!==this){let t,s;if(this._name)if(this._outputs.size)i.delete(this._name),s=this._module._resolve(this._name),s._outputs=this._outputs,this._outputs=new Set,s._outputs.forEach((function(e){e._inputs[e._inputs.indexOf(this)]=s}),this),s._outputs.forEach(r._updates.add,r._updates),r._dirty.add(s).add(this),i.set(this._name,s);else if((s=i.get(this._name))===this)i.delete(this._name);else{if(s._type!==vi)throw new Error;s._duplicates.delete(this),this._duplicate=void 0,1===s._duplicates.size&&(s=s._duplicates.keys().next().value,t=i.get(this._name),s._outputs=t._outputs,t._outputs=new Set,s._outputs.forEach((function(e){e._inputs[e._inputs.indexOf(t)]=s})),s._definition=s._duplicate,s._duplicate=void 0,r._dirty.add(t).add(s),r._updates.add(s),i.set(this._name,s))}if(this._outputs.size)throw new Error;e&&((s=i.get(e))?s._type===vi?(this._definition=Ei(e),this._duplicate=n,s._duplicates.add(this)):s._type===mi?(this._outputs=s._outputs,s._outputs=new Set,this._outputs.forEach((function(e){e._inputs[e._inputs.indexOf(s)]=this}),this),r._dirty.add(s).add(this),i.set(e,this)):(s._duplicate=s._definition,this._duplicate=n,t=new bi(vi,this._module),t._name=e,t._definition=this._definition=s._definition=Ei(e),t._outputs=s._outputs,s._outputs=new Set,t._outputs.forEach((function(e){e._inputs[e._inputs.indexOf(s)]=t})),t._duplicates=new Set([this,s]),r._dirty.add(s).add(t),r._updates.add(s).add(t),i.set(e,t)):i.set(e,this)),this._name=e}return this._version>0&&++this._version,r._updates.add(this),r._compute(),this}Object.defineProperties(bi.prototype,{_pending:{value:function(){this._observer.pending&&this._observer.pending()},writable:!0,configurable:!0},_fulfilled:{value:function(e){this._observer.fulfilled&&this._observer.fulfilled(e,this._name)},writable:!0,configurable:!0},_rejected:{value:function(e){this._observer.rejected&&this._observer.rejected(e,this._name)},writable:!0,configurable:!0},define:{value:function(e,t,n){switch(arguments.length){case 1:n=e,e=t=null;break;case 2:n=t,"string"==typeof e?t=null:(t=e,e=null)}return Ai.call(this,null==e?null:String(e),null==t?[]:fi.call(t,this._module._resolve,this._module),"function"==typeof n?n:ui(n))},writable:!0,configurable:!0},delete:{value:function(){return Ai.call(this,null,[],hi)},writable:!0,configurable:!0},import:{value:function(e,t,n){arguments.length<3&&(n=t,t=e);return Ai.call(this,String(t),[n._resolve(String(e))],di)},writable:!0,configurable:!0}});const Si=Symbol("variable"),xi=Symbol("invalidation"),Ci=Symbol("visibility");function Ni(e,t=[]){Object.defineProperties(this,{_runtime:{value:e},_scope:{value:new Map},_builtins:{value:new Map([["@variable",Si],["invalidation",xi],["visibility",Ci],...t])},_source:{value:null,writable:!0}})}async function ki(e,t){await e._compute();try{return await t._promise}catch(n){if(n===$i)return ki(e,t);throw n}}function Ti(e){return e._name}Object.defineProperties(Ni.prototype,{_resolve:{value:function(e){let t,n=this._scope.get(e);if(!n)if(n=new bi(mi,this),this._builtins.has(e))n.define(e,ui(this._builtins.get(e)));else if(this._runtime._builtin._scope.has(e))n.import(e,this._runtime._builtin);else{try{t=this._runtime._global(e)}catch(t){return n.define(e,function(e){return()=>{throw e}}(t))}void 0===t?this._scope.set(n._name=e,n):n.define(e,ui(t))}return n},writable:!0,configurable:!0},redefine:{value:function(e){const t=this._scope.get(e);if(!t)throw new ci(`${e} is not defined`);if(t._type===vi)throw new ci(`${e} is defined more than once`);return t.define.apply(t,arguments)},writable:!0,configurable:!0},define:{value:function(){const e=new bi(pi,this);return e.define.apply(e,arguments)},writable:!0,configurable:!0},derive:{value:function(e,t){const n=new Map,i=new Set,r=[];function s(e){let t=n.get(e);return t||(t=new Ni(e._runtime,e._builtins),t._source=e,n.set(e,t),r.push([t,e]),i.add(e),t)}const o=s(this);for(const n of e){const{alias:e,name:i}="object"==typeof n?n:{name:n};o.import(i,e??i,t)}for(const e of i)for(const[t,n]of e._scope)if(n._definition===di){if(e===this&&o._scope.has(t))continue;const i=n._inputs[0]._module;i._source&&s(i)}for(const[e,t]of r)for(const[i,r]of t._scope){const t=e._scope.get(i);if(!t||t._type===mi)if(r._definition===di){const t=r._inputs[0],s=t._module;e.import(t._name,i,n.get(s)||s)}else e.define(i,r._inputs.map(Ti),r._definition)}return o},writable:!0,configurable:!0},import:{value:function(){const e=new bi(pi,this);return e.import.apply(e,arguments)},writable:!0,configurable:!0},value:{value:async function(e){let t=this._scope.get(e);if(!t)throw new ci(`${e} is not defined`);if(t._observer!==yi)return ki(this._runtime,t);t=this.variable(!0).define([e],di);try{return await ki(this._runtime,t)}finally{t.delete()}},writable:!0,configurable:!0},variable:{value:function(e){return new bi(pi,this,e)},writable:!0,configurable:!0},builtin:{value:function(e,t){this._builtins.set(e,t)},writable:!0,configurable:!0}});const Pi="function"==typeof requestAnimationFrame?requestAnimationFrame:"function"==typeof setImmediate?setImmediate:e=>setTimeout(e,0);function ji(e=new ai,t=Bi){const n=this.module();if(Object.defineProperties(this,{_dirty:{value:new Set},_updates:{value:new Set},_precomputes:{value:[],writable:!0},_computing:{value:null,writable:!0},_init:{value:null,writable:!0},_modules:{value:new Map},_variables:{value:new Set},_disposed:{value:!1,writable:!0},_builtin:{value:n},_global:{value:t}}),e)for(const t in e)new bi(mi,n).define(t,[],e[t])}function Ii(e){const t=new Set(e._inputs);for(const n of t){if(n===e)return!0;n._inputs.forEach(t.add,t)}return!1}function Ri(e){++e._indegree}function Mi(e){--e._indegree}function Oi(e){return e._promise.catch(e._rejector)}function Di(e){return new Promise((function(t){e._invalidate=t}))}function Li(e,t){let n,i,r="function"==typeof IntersectionObserver&&t._observer&&t._observer._node,s=!r,o=hi,a=hi;return r&&(i=new IntersectionObserver((([e])=>(s=e.isIntersecting)&&(n=null,o()))),i.observe(r),e.then((()=>(i.disconnect(),i=null,a())))),function(e){return s?Promise.resolve(e):i?(n||(n=new Promise(((e,t)=>(o=e,a=t)))),n.then((()=>e))):Promise.reject()}}function Ui(e){e._invalidate(),e._invalidate=hi,e._pending();const t=e._value,n=++e._version;let i=null;const r=e._promise=(e._inputs.length?Promise.all(e._inputs.map(Oi)).then((function(r){if(e._version!==n)throw $i;for(let t=0,n=r.length;t<n;++t)switch(r[t]){case xi:r[t]=i=Di(e);break;case Ci:i||(i=Di(e)),r[t]=Li(i,e);break;case Si:r[t]=e}return e._definition.apply(t,r)})):new Promise((n=>n(e._definition.call(t))))).then((function(t){if(e._version!==n)throw $i;if(function(e){return e&&"function"==typeof e.next&&"function"==typeof e.return}(t))return(i||Di(e)).then((r=t,function(){r.return()})),function(e,t,n){const i=e._module._runtime;let r;function s(e){return new Promise((e=>e(n.next(r)))).then((({done:t,value:n})=>t?void 0:Promise.resolve(n).then(e)))}function o(){const n=s((s=>{if(e._version!==t)throw $i;return r=s,a(s,n).then((()=>i._precompute(o))),e._fulfilled(s),s}));n.catch((i=>{i!==$i&&e._version===t&&(a(void 0,n),e._rejected(i))}))}function a(t,n){return e._value=t,e._promise=n,e._outputs.forEach(i._updates.add,i._updates),i._compute()}return s((n=>{if(e._version!==t)throw $i;return r=n,i._precompute(o),n}))}(e,n,t);var r;return t}));r.then((t=>{e._value=t,e._fulfilled(t)}),(t=>{t!==$i&&(e._value=void 0,e._rejected(t))}))}function qi(e,t){e._invalidate(),e._invalidate=hi,e._pending(),++e._version,e._indegree=NaN,(e._promise=Promise.reject(t)).catch(hi),e._value=void 0,e._rejected(t)}function Bi(e){return globalThis[e]}Object.defineProperties(ji.prototype,{_precompute:{value:function(e){this._precomputes.push(e),this._compute()},writable:!0,configurable:!0},_compute:{value:function(){return this._computing||(this._computing=this._computeSoon())},writable:!0,configurable:!0},_computeSoon:{value:function(){return new Promise(Pi).then((()=>this._disposed?void 0:this._computeNow()))},writable:!0,configurable:!0},_computeNow:{value:async function(){let e,t,n=[],i=this._precomputes;if(i.length){this._precomputes=[];for(const e of i)e();await function(e=0){let t=Promise.resolve();for(let n=0;n<e;++n)t=t.then((()=>{}));return t}(3)}e=new Set(this._dirty),e.forEach((function(t){t._inputs.forEach(e.add,e);const n=function(e){if(e._observer!==yi)return!0;const t=new Set(e._outputs);for(const e of t){if(e._observer!==yi)return!0;e._outputs.forEach(t.add,t)}return!1}(t);n>t._reachable?this._updates.add(t):n<t._reachable&&t._invalidate(),t._reachable=n}),this),e=new Set(this._updates),e.forEach((function(t){t._reachable?(t._indegree=0,t._outputs.forEach(e.add,e)):(t._indegree=NaN,e.delete(t))})),this._computing=null,this._updates.clear(),this._dirty.clear(),e.forEach((function(e){e._outputs.forEach(Ri)}));do{for(e.forEach((function(e){0===e._indegree&&n.push(e)}));t=n.pop();)Ui(t),t._outputs.forEach(r),e.delete(t);e.forEach((function(t){Ii(t)&&(qi(t,new ci("circular definition")),t._outputs.forEach(Mi),e.delete(t))}))}while(e.size);function r(e){0==--e._indegree&&n.push(e)}},writable:!0,configurable:!0},dispose:{value:function(){this._computing=Promise.resolve(),this._disposed=!0,this._variables.forEach((e=>{e._invalidate(),e._version=NaN}))},writable:!0,configurable:!0},module:{value:function(e,t=hi){let n;if(void 0===e)return(n=this._init)?(this._init=null,n):new Ni(this);if(n=this._modules.get(e),n)return n;this._init=n=new Ni(this),this._modules.set(e,n);try{e(this,t)}finally{this._init=null}return n},writable:!0,configurable:!0},fileAttachments:{value:function(e){return Object.assign((t=>{const n=e(t+="");if(null==n)throw new Error(`File not found: ${t}`);if("object"==typeof n&&"url"in n){const{url:e,mimeType:i}=n;return new Rn(e,t,i)}return new Rn(n,t)}),{prototype:Rn.prototype})},writable:!0,configurable:!0}});const Hi=ji.prototype.fileAttachments((function(e){return e}));class Fi{constructor(){const e=Object.assign(new ai,{FileAttachment:()=>Hi});this.runtime=new ji(e),this.main=this.runtime.module()}redefine(e,t,n=[]){this.main.redefine(e,n,t)}variable(e,t,n=[],i){this.main.variable(i).define(e,n,t)}module(e,t){const n=this.runtime.module(e);return t?n.derive(t,this.main):n}import(e,t,n=t){this.main.import(t,n,e)}value(e){return this.main.value(e)}define(e,t){const n=new Map;e.forEach((e=>{if(e.module){const[t,i,r]=e.module;n.set(t,this.module(i,r))}else if(e.import){const[t,i,r]=e.import;this.import(n.get(t),i,r)}else if(e.define){const[n,i,r]=e.define;this.variable(n,r,i,t(e))}}))}handler(e){return async t=>{t.preventDefault();const[n,i]=await this.value(e),r=await Promise.all(i.map((e=>this.value(e)))),s=Object.create(null);r.forEach(((e,t)=>s[i[t]]=e)),await n(s)(t),r.forEach(((e,t)=>{const n=i[t];e!==s[n]&&this.redefine(n,s[n])}))}}}class zi extends ee{createRenderRoot(){return this}connectedCallback(){this.__initchildnodes||(this.__initchildnodes=!0,this.initialChildNodes(Array.from(this.childNodes,(e=>(e.__element=this,e)))),function(e,t=0){const n=e.childNodes;let i=n.length;for(;i>t;)e.removeChild(n[--i])}(this)),super.connectedCallback()}initialChildNodes(e){this.__children=e}articleData(){let e=this;for(;"ARTICLE"!==e.tagName;e=e.parentNode||e.__element);return e?.__data}}function Wi(e){return M`<span class="error-block">${e}</span>`}class Ji extends zi{constructor(){super(),this.visible=!1,this.addEventListener("keydown",this.keyDown),this.addEventListener("mousedown",this.mouseDown)}mouseDownClose=e=>{this.contains(e.target)||this.hide()};keyDownClose=e=>{Gi(e.key)&&this.hide()};keyDown(e){Vi(e.key)&&!this.visible&&this.show()}mouseDown(){this.visible||this.show()}hide(){this.querySelector(".tooltip").style.display="none",this.visible=!1,document.removeEventListener("keydown",this.keyDownClose),document.removeEventListener("mousedown",this.mouseDownClose)}show(){const e=this.getBoundingClientRect(),t=this.querySelector(".tooltip");t.style.display="inline-block",this.visible=!0,function(e,t){t.style.transform="translate(0, 0)";const n=t.getBoundingClientRect(),i=n.width,r=n.left,s=e.left,o=document.body.clientWidth-16,a=i>o?-r:s+i>o?o-(r+i):s-r,l=e.bottom-n.top+2;t.style.transform=`translate(${a}px, ${l}px)`}(e,t),document.addEventListener("keydown",this.keyDownClose),document.addEventListener("mousedown",this.mouseDownClose)}renderWithTooltip(e,t,n){const i=M`<div class="tooltip">${n}</div>`;return M`<span class=${e} tabindex=0>${i}${t}</span>`}}const Vi=(e,t="Enter")=>e===t,Gi=(e,t="Escape")=>e===t;function Ki(e){return(e||[]).map((({given:e,family:t})=>e?`${e.includes(".")?e:e[0]+"."} ${t}`:t))}function Yi(){this.querySelector(".cite-author-expand").style.display="none",this.querySelector(".cite-author-hidden").style.display="inline"}function Zi(){this.querySelector(".cite-author-expand").style.display="inline",this.querySelector(".cite-author-hidden").style.display="none"}const Xi="tag";function Qi(e,t){if(t.className===Xi)return;const n=t.cloneNode();if(n.id&&n.removeAttribute("id"),e.append(n),!nr(t))for(const e of t.childNodes)Qi(n,e)}const er={SECTION:"sec",FIGURE:"fig",TABLE:"tbl",EQUATION:"eqn"},tr=new Set(["CITE-REF","CODE-BLOCK","CROSS-REF","INLINE-NOTE","RANGE-TEXT","TEX-MATH"]),nr=e=>tr.has(e.tagName);Promise.resolve(!0);var ir=Object.freeze({__proto__:null,attrs:function(){return[{define:[null,["figA"],function(e){return e}],cell:0},{define:[null,[],function(){return!1}],cell:1},{define:[null,["figB"],function(e){return e}],cell:2}]},cells:function(){return[{define:["formatProb",[],function(){return function e(t){return t<=.5?(t=Number.parseFloat(t).toPrecision(2),t=((t=Number.parseFloat(t).toPrecision())+"").replace(/^0+/,"")):(t=1-e(1-t),t=((t=Math.round(1e8*t)/1e8)+"").replace(/^0+/,"")),t}}],cell:0},{define:["formatPerc",["formatProb"],function(e){return function(t){return t=100*e(t/100),(t=Math.round(1e8*t)/1e8)+"%"}}],cell:1},{define:["bootstrap",[],function(){return!0}],cell:2},{define:["log_transform",[],function(){return!0}],cell:3},{define:["bonferroni",[],function(){return!0}],cell:4},{define:["n_comparisons",[],function(){return 3}],cell:5},{define:["confidence_level",[],function(){return 50}],cell:6},{define:["file_suffix",["confidence_level","bootstrap","log_transform","bonferroni"],function(e,t,n,i){return`${Math.round(10*e)/1e3}${t?"-bootstrapped":""}${n?"-log-transformed":""}${i?"-bonferroni-adjusted":""}.jpg`}],cell:7},{define:["figA",["file_suffix"],function(e){return`assets/R/fig1-${e}`}],cell:8},{define:["figB",["file_suffix"],function(e){return`assets/R/fig2-${e}`}],cell:9},{define:["alpha_level",["confidence_level"],function(e){return 1-e/100}],cell:10},{define:["individual_alpha_level",["bonferroni","alpha_level","n_comparisons"],function(e,t,n){return e?t/n:t}],cell:11},{define:["individual_confidence_level",["bonferroni","individual_alpha_level","confidence_level"],function(e,t,n){return e?100*(1-t):n}],cell:12},{define:["familywise_error_rate",["individual_alpha_level","n_comparisons"],function(e,t){return 1-Math.pow(1-e,t)}],cell:13},{define:["simultaneous_confidence_level",["familywise_error_rate"],function(e){return 100*(1-e)}],cell:14},{define:[null,["log_transform"],function(e){return e?"arithmetic":"geometric"}],cell:15},{define:[null,["formatPerc","confidence_level"],function(e,t){return e(t)}],cell:16},{define:[null,["formatPerc","confidence_level"],function(e,t){return e(t)}],cell:17},{define:[null,["confidence_level"],function(e){return 95===e?"about 7 times":""}],cell:18},{define:[null,["log_transform"],function(e){return e?"mean":"(geometric)"}],cell:19},{define:[null,["log_transform"],function(e){return e?"differences":"ratios"}],cell:20},{define:[null,["log_transform"],function(e){return e?0:1}],cell:21},{define:[null,["formatPerc","confidence_level"],function(e,t){return e(t)}],cell:22},{define:[null,["formatPerc","individual_confidence_level"],function(e,t){return e(t)}],cell:23},{define:[null,["log_transform"],function(e){return e?0:1}],cell:24},{define:[null,["formatProb","individual_alpha_level"],function(e,t){return e(t)}],cell:25},{define:[null,["n_comparisons"],function(e){return e}],cell:26},{define:[null,["formatProb","familywise_error_rate"],function(e,t){return e(t)}],cell:27},{define:[null,["formatPerc","simultaneous_confidence_level"],function(e,t){return e(t)}],cell:28},{define:[null,["n_comparisons"],function(e){return e}],cell:29},{define:[null,["n_comparisons"],function(e){return e}],cell:30},{define:[null,["formatPerc","simultaneous_confidence_level"],function(e,t){return e(t)}],cell:31},{define:[null,["bonferroni","formatPerc","confidence_level"],function(e,t,n){return e?"Bonferroni-corrected":t(n)}],cell:32},{define:[null,["bootstrap"],function(e){return e?"BCa bootstrap":"t-based"}],cell:33}]}});document.querySelector("article").__data={citations:{bibtex:['@article{Amrhein2017,\n\tauthor = {Amrhein, Valentin and Korner-Nievergelt, Fr{\\" a}nzi and Roth, Tobias},\n\tjournal = {PeerJ},\n\tyear = {2017},\n\tpages = {e3544},\n\tpublisher = {PeerJ Inc.},\n\ttitle = {The earth is flat (p\\textgreater{} 0.05): significance thresholds and the crisis of unreplicable research},\n\tvolume = {5},\n}',"@misc{Baguley2012,\n\tauthor = {Baguley, T},\n\tyear = {2012},\n\tpublisher = {Palgrave Macmillan},\n\ttitle = {Serious {Stats}: A {Guide} to {Advanced} {Statistics} for the {Behavioral} {Science}.},\n}","@book{Cumming2012,\n\tauthor = {Cumming, Geoff},\n\tseries = {Multivariate {Applications} {Series}},\n\tyear = {2012},\n\tpublisher = {Routledge},\n\ttitle = {Understanding the {New} {Statistics}: Effect {Sizes}, {Confidence} {Intervals}, and {Meta}-analysis},\n}","@inbook{Dragicevic2016,\n\taddress = {Cham},\n\tauthor = {Dragicevic, Pierre},\n\tbooktitle = {Modern {Statistical} {Methods} for {HCI}},\n\teditor = {Robertson, Judy and Kaptein, Maurits},\n\tyear = {2016},\n\tpages = {291--330},\n\tpublisher = {Springer International Publishing},\n\ttitle = {Fair {Statistical} {Communication} in {HCI}},\n}","@inproceedings{Jansen2013,\n\taddress = {New York, NY, USA},\n\tauthor = {Jansen, Yvonne and Dragicevic, Pierre and Fekete, Jean-Daniel},\n\tseries = {CHI '13},\n\tbooktitle = {Proceedings of the {SIGCHI} {Conference} on {Human} {Factors} in {Computing} {Systems}},\n\tyear = {2013},\n\tpages = {2593--2602},\n\torganization = {ACM},\n\ttitle = {Evaluating the {Efficiency} of {Physical} {Visualizations}},\n}","@article{Kirby2013,\n\tauthor = {Kirby, Kris N and Gerlanc, Daniel},\n\tjournal = {Behavior research methods},\n\tnumber = {4},\n\tyear = {2013},\n\tmonth = {12},\n\tpages = {905--927},\n\tpublisher = {Springer},\n\ttitle = {BootES: an {R} package for bootstrap confidence intervals on effect sizes},\n\tvolume = {45},\n}","@article{Morey2016,\n\tauthor = {Morey, Richard D and Hoekstra, Rink and Rouder, Jeffrey N and Lee, Michael D and Wagenmakers, Eric-Jan},\n\tjournal = {Psychonomic bulletin & review},\n\tnumber = {1},\n\tyear = {2016},\n\tmonth = {2},\n\tpages = {103--123},\n\ttitle = {The fallacy of placing confidence in confidence intervals},\n\thowpublished = {http://dx.doi.org/10.3758/s13423-015-0947-8},\n\tvolume = {23},\n}","@inproceedings{Sauro2010,\n\taddress = {Atlanta, Georgia, USA},\n\tauthor = {Sauro, Jeff and Lewis, James R},\n\tbooktitle = {Proceedings of the {SIGCHI} {Conference} on {Human} {Factors} in {Computing} {Systems}},\n\tyear = {2010},\n\tmonth = {4},\n\tpages = {2347--2350},\n\torganization = {ACM},\n\ttitle = {Average task times in usability tests: what to report?},\n}","@article{Steegen2016,\n\tauthor = {Steegen, Sara and Tuerlinckx, Francis and Gelman, Andrew and Vanpaemel, Wolf},\n\tjournal = {Perspectives on psychological science: a journal of the Association for Psychological Science},\n\tnumber = {5},\n\tyear = {2016},\n\tmonth = {9},\n\tpages = {702--712},\n\ttitle = {Increasing {Transparency} {Through} a {Multiverse} {Analysis}},\n\thowpublished = {http://dx.doi.org/10.1177/1745691616658637},\n\tvolume = {11},\n}","@article{Victor2011,\n\tauthor = {Victor, Bret},\n\tjournal = {Bret Victor},\n\tyear = {2011},\n\ttitle = {Explorable explanations},\n\tvolume = {10},\n}"],csl:[{"container-title":"PeerJ",author:[{given:"Valentin",family:"Amrhein"},{given:"Frnzi",family:"Korner-Nievergelt"},{given:"Tobias",family:"Roth"}],type:"article-journal",id:"Amrhein2017","citation-key":"Amrhein2017",issued:{"date-parts":[[2017]]},page:"e3544",publisher:"PeerJ Inc.",title:"The earth is flat (p> 0.05): significance thresholds and the crisis of unreplicable research",URL:"https://peerj.com/articles/3544/?utm_source=TrendMD&utm_campaign=PeerJ_TrendMD_0&utm_medium=TrendMD",volume:"5"},{author:[{given:"T",family:"Baguley"}],type:"document",id:"Baguley2012","citation-key":"Baguley2012",issued:{"date-parts":[[2012]]},publisher:"Palgrave Macmillan",title:"Serious Stats: A Guide to Advanced Statistics for the Behavioral Science."},{author:[{given:"Geoff",family:"Cumming"}],"collection-title":"Multivariate Applications Series",type:"book",id:"Cumming2012","citation-key":"Cumming2012",ISBN:"9780415879682",issued:{"date-parts":[[2012]]},language:"en",publisher:"Routledge",title:"Understanding the New Statistics: Effect Sizes, Confidence Intervals, and Meta-analysis",URL:"https://market.android.com/details?id=book-AVBDYgEACAAJ"},{"publisher-place":"Cham",author:[{given:"Pierre",family:"Dragicevic"}],"container-title":"Modern Statistical Methods for HCI",DOI:"10.1007/978-3-319-26633-6\\_13",editor:[{given:"Judy",family:"Robertson"},{given:"Maurits",family:"Kaptein"}],type:"chapter",id:"Dragicevic2016","citation-key":"Dragicevic2016",ISBN:"9783319266336",issued:{"date-parts":[[2016]]},page:"291-330",publisher:"Springer International Publishing",title:"Fair Statistical Communication in HCI",URL:"https://doi.org/10.1007/978-3-319-26633-6_13"},{"publisher-place":"New York, NY, USA",author:[{given:"Yvonne",family:"Jansen"},{given:"Pierre",family:"Dragicevic"},{given:"Jean-Daniel",family:"Fekete"}],"container-title":"Proceedings of the SIGCHI Conference on Human Factors in Computing Systems","collection-title":"CHI '13",DOI:"10.1145/2470654.2481359",type:"paper-conference",id:"Jansen2013","citation-key":"Jansen2013",ISBN:"9781450318990",issued:{"date-parts":[[2013]]},keyword:"3d visualization,evaluation,physical visualization",page:"2593-2602",publisher:"ACM",title:"Evaluating the Efficiency of Physical Visualizations",URL:"http://doi.acm.org/10.1145/2470654.2481359"},{"container-title":"Behavior research methods",PMID:"23519455",author:[{given:"Kris N",family:"Kirby"},{given:"Daniel",family:"Gerlanc"}],DOI:"10.3758/s13428-013-0330-5",type:"article-journal",id:"Kirby2013","citation-key":"Kirby2013",ISSN:"1554-351X, 1554-3528",issue:"4",issued:{"date-parts":[[2013,12]]},language:"en",page:"905-927",publisher:"Springer",title:"BootES: an R package for bootstrap confidence intervals on effect sizes",URL:"http://dx.doi.org/10.3758/s13428-013-0330-5",volume:"45"},{"container-title":"Psychonomic bulletin & review",PMID:"26450628",author:[{given:"Richard D",family:"Morey"},{given:"Rink",family:"Hoekstra"},{given:"Jeffrey N",family:"Rouder"},{given:"Michael D",family:"Lee"},{given:"Eric-Jan",family:"Wagenmakers"}],DOI:"10.3758/s13423-015-0947-8",type:"article-journal",id:"Morey2016","citation-key":"Morey2016",ISSN:"1069-9384, 1531-5320",issue:"1",issued:{"date-parts":[[2016,2]]},keyword:"Bayesian inference and parameter estimation; Bayesian statistics; Statistical inference; Statistics",language:"en",page:"103-123",title:"The fallacy of placing confidence in confidence intervals",URL:"http://dx.doi.org/10.3758/s13423-015-0947-8",volume:"23"},{"publisher-place":"Atlanta, Georgia, USA",author:[{given:"Jeff",family:"Sauro"},{given:"James R",family:"Lewis"}],"container-title":"Proceedings of the SIGCHI Conference on Human Factors in Computing Systems",DOI:"10.1145/1753326.1753679",type:"paper-conference",id:"Sauro2010","citation-key":"Sauro2010",ISBN:"9781605589299",issued:{"date-parts":[[2010,4]]},keyword:"geometric mean,median,monte carlo simulations,task times,usability evaluation",page:"2347-2350",publisher:"ACM",title:"Average task times in usability tests: what to report?",URL:"https://dl.acm.org/citation.cfm?doid=1753326.1753679"},{"container-title":"Perspectives on psychological science: a journal of the Association for Psychological Science",PMID:"27694465",author:[{given:"Sara",family:"Steegen"},{given:"Francis",family:"Tuerlinckx"},{given:"Andrew",family:"Gelman"},{given:"Wolf",family:"Vanpaemel"}],DOI:"10.1177/1745691616658637",type:"article-journal",id:"Steegen2016","citation-key":"Steegen2016",ISSN:"1745-6916, 1745-6924",issue:"5",issued:{"date-parts":[[2016,9]]},keyword:"arbitrary choices; data processing; good research practices; multiverse analysis; selective reporting; transparency",language:"en",page:"702-712",title:"Increasing Transparency Through a Multiverse Analysis",URL:"http://dx.doi.org/10.1177/1745691616658637",volume:"11"},{"container-title":"Bret Victor",author:[{given:"Bret",family:"Victor"}],type:"article-journal",id:"Victor2011","citation-key":"Victor2011",issued:{"date-parts":[[2011]]},title:"Explorable explanations",volume:"10"}],data:[{id:"Amrhein2017",year:2017,author:[{given:"Valentin",family:"Amrhein"},{given:"Frnzi",family:"Korner-Nievergelt"},{given:"Tobias",family:"Roth"}],title:"The earth is flat (p> 0.05): significance thresholds and the crisis of unreplicable research",venue:"PeerJ",url:"https://peerj.com/articles/3544/?utm_source=TrendMD&utm_campaign=PeerJ_TrendMD_0&utm_medium=TrendMD"},{id:"Baguley2012",year:2012,author:[{given:"T",family:"Baguley"}],title:"Serious Stats: A Guide to Advanced Statistics for the Behavioral Science."},{id:"Cumming2012",year:2012,author:[{given:"Geoff",family:"Cumming"}],title:"Understanding the New Statistics: Effect Sizes, Confidence Intervals, and Meta-analysis",url:"https://market.android.com/details?id=book-AVBDYgEACAAJ"},{id:"Dragicevic2016",doi:"10.1007/978-3-319-26633-6\\_13",year:2016,author:[{given:"Pierre",family:"Dragicevic"}],title:"Fair Statistical Communication in HCI",venue:"Modern Statistical Methods for HCI",url:"https://doi.org/10.1007/978-3-319-26633-6_13"},{id:"Jansen2013",doi:"10.1145/2470654.2481359",s2id:"424d0d3d100201cb08d43d15610a99ac36414159",year:2013,author:[{given:"Yvonne",family:"Jansen"},{given:"Pierre",family:"Dragicevic"},{given:"Jean-Daniel",family:"Fekete"}],title:"Evaluating the Efficiency of Physical Visualizations",venue:"Proceedings of the SIGCHI Conference on Human Factors in Computing Systems",url:"http://doi.acm.org/10.1145/2470654.2481359",abstract:"Data sculptures are an increasingly popular form of physical visualization whose purposes are essentially artistic, communicative or educational. But can physical visualizations help carry out actual information visualization tasks? We present the first infovis study comparing physical to on-screen visualizations. We focus on 3D visualizations, as these are common among physical visualizations but known to be problematic on computers. Taking 3D bar charts as an example, we show that moving visualizations to the physical world can improve users' efficiency at information retrieval tasks. In contrast, augmenting on-screen visualizations with stereoscopic rendering alone or with prop-based manipulation was of limited help. The efficiency of physical visualizations seems to stem from features that are unique to physical objects, such as their ability to be touched and their perfect visual realism. These findings provide empirical motivation for current research on fast digital fabrication and self-reconfiguring interfaces.",tldr:"It is shown that moving visualizations to the physical world can improve users' efficiency at information retrieval tasks, and provides empirical motivation for current research on fast digital fabrication and self-reconfiguring interfaces."},{id:"Kirby2013",doi:"10.3758/s13428-013-0330-5",s2id:"0ce6e159435e2619bb682f49947ddff7a2b6a0a8",year:2013,author:[{given:"Kris N",family:"Kirby"},{given:"Daniel",family:"Gerlanc"}],title:"BootES: an R package for bootstrap confidence intervals on effect sizes",venue:"Behavior research methods",url:"http://dx.doi.org/10.3758/s13428-013-0330-5"},{id:"Morey2016",doi:"10.3758/s13423-015-0947-8",s2id:"5547f4b2b3e3482a37303528c4d02228062dc20d",year:2015,author:[{given:"Richard D",family:"Morey"},{given:"Rink",family:"Hoekstra"},{given:"Jeffrey N",family:"Rouder"},{given:"Michael D",family:"Lee"},{given:"Eric-Jan",family:"Wagenmakers"}],title:"The fallacy of placing confidence in confidence intervals",venue:"Psychonomic bulletin & review",url:"http://dx.doi.org/10.3758/s13423-015-0947-8"},{id:"Sauro2010",doi:"10.1145/1753326.1753679",s2id:"57bac95d1d6c59605039d275de78382e8abaf333",year:2010,author:[{given:"Jeff",family:"Sauro"},{given:"James R",family:"Lewis"}],title:"Average task times in usability tests: what to report?",venue:"Proceedings of the SIGCHI Conference on Human Factors in Computing Systems",url:"https://dl.acm.org/citation.cfm?doid=1753326.1753679",abstract:"The distribution of task time data in usability studies is positively skewed. Practitioners who are aware of this positive skew tend to report the sample median. Monte Carlo simulations using data from 61 large-sample usability tasks showed that the sample median is a biased estimate of the population median. Using the geometric mean to estimate the center of the population will, on average, have 13% less error and 22% less bias than the sample median. Other estimates of the population center (trimmed, harmonic and Winsorized means) had worse performance than the sample median.",tldr:"Monte Carlo simulations using data from 61 large-sample usability tasks showed that the sample median is a biased estimate of the population median."},{id:"Steegen2016",doi:"10.1177/1745691616658637",s2id:"cd2b3a9f5cfd351b9434fe8da693a5c314c527b6",year:2016,author:[{given:"Sara",family:"Steegen"},{given:"Francis",family:"Tuerlinckx"},{given:"Andrew",family:"Gelman"},{given:"Wolf",family:"Vanpaemel"}],title:"Increasing Transparency Through a Multiverse Analysis",venue:"Perspectives on psychological science: a journal of the Association for Psychological Science",url:"http://dx.doi.org/10.1177/1745691616658637",abstract:"Empirical research inevitably includes constructing a data set by processing raw data into a form ready for statistical analysis. Data processing often involves choices among several reasonable options for excluding, transforming, and coding data. We suggest that instead of performing only one analysis, researchers could perform a multiverse analysis, which involves performing all analyses across the whole set of alternatively processed data sets corresponding to a large set of reasonable scenarios. Using an example focusing on the effect of fertility on religiosity and political attitudes, we show that analyzing a single data set can be misleading and propose a multiverse analysis as an alternative practice. A multiverse analysis offers an idea of how much the conclusions change because of arbitrary choices in data construction and gives pointers as to which choices are most consequential in the fragility of the result.",tldr:"It is shown that analyzing a single data set can be misleading and a multiverse analysis is proposed as an alternative practice, which involves performing all analyses across the whole set of alternatively processed data sets corresponding to a large set of reasonable scenarios."},{id:"Victor2011",year:2011,author:[{given:"Bret",family:"Victor"}],title:"Explorable explanations",venue:"Bret Victor"}]}},window.customElements.define("cell-view",class extends zi{static get properties(){return{value:{state:!0},status:{type:String,state:!0}}}constructor(){super(),this.status=ue,this.observer=new he(((e,t)=>{this.status=e,e!==ue&&(this.value=t,this.dispatchEvent(new Event("change")))}))}render(){switch(this.status){case ue:case de:return this.value;case fe:return Wi(this.value.error);default:return Wi(`Unrecognized status: ${this.status}.`)}}}),window.customElements.define("cite-ref",class extends Ji{static get properties(){return{key:{type:String},mode:{type:String},index:{type:Number}}}constructor(){super(),this.mode="citation"}initialChildNodes(e){this.__prefix=e[0],this.__suffix=e[1]}citeData(){return this.data||(this.data=this.articleData()?.citations?.data[this.index-1])}render(){const{key:e,index:t,mode:n,data:i=this.citeData()}=this,r="cite-ref"+(i?"":" unresolved"),s=null==i?t??"??":"inline-author"===n?function(e,t,n=2){const{author:i,title:r}=e;if(!i||!i.length)return`${r} [${t}]`;let s=i[0].family;2===i.length?s+=` & ${i[1].family}`:i.length>n&&(s+=" et al.");return`${s} [${t}]`}(i,t):t;return this.renderWithTooltip(r,s,function(e,t){return t?M`<div class="cite-info">
      ${function(e){const{url:t,title:n,year:i,author:r}=e,s=i?M`\u2022 <span class="cite-year">${i}</a>`:"",o=n||Ki(r).join(", ")||"Unknown Title";return t?M`<div class="cite-title">
      <a href=${t} target="_blank" rel="noopener noreferrer">${o}</a>
      ${s}
    </div>`:M`<div class="cite-title">${o}${s}</div>`}(t)}
      ${function(e,t=4){const{author:n,title:i}=e;if(!i)return null;const r=Ki(n),s=r.length-t;if(s>1){const e=r.slice(0,t).join(", "),n=", "+r.slice(t).join(", "),i=M`<span class="cite-author-button" @click=${Yi}>+${s}&nbsp;authors</span>`,o=M`<span class="cite-author-expand"> ${i}</span>`,a=M` <span class="cite-author-button" @click=${Zi}>less</span>`,l=M`<span class="cite-author-hidden">${n}${a}</span>`;return M`<div class="cite-author">${e}${o}${l}</div>`}return r.length?M`<div class="cite-author">${r.join(", ")}</div>`:null}(t)}
      ${function(e){const{venue:t}=e;return t?M`<div class="cite-venue">${t}</div>`:null}(t)}
      ${function(e,t=300){const{abstract:n,tldr:i}=e,r=i||n;if(!r)return null;const s=r!==i&&r.length>t?r.slice(0,r.slice(0,t).lastIndexOf(" "))+"":r;return M`<div class="cite-detail">${s}</div>`}(t)}
    </div>`:M`<div class="cite-info">
      <strong>Unresolved citation</strong><br>"${e}"
    </div>`}(e,i))}}),window.customElements.define("cross-ref",class extends Ji{static get properties(){return{type:{type:String},xref:{type:String},index:{type:Number},short:{type:Boolean}}}show(){this.renderTooltipContent(),super.show()}goto(e){e.preventDefault();const t=`#${this.xref}`;history.replaceState(null,null,t),document.querySelector(t).scrollIntoView({behavior:"smooth",block:"nearest"})}renderTooltipContent(){if(null==this.index)return;const e=this.querySelector(".cross-ref-tooltip");e.replaceChildren(),Qi(e,document.getElementById(this.xref)),e.firstElementChild.className=this.type===er.FIGURE?"figure":this.type===er.TABLE?"table":""}renderUnresolvedReference(e){const t=M`<div class="cross-ref-tooltip">
      Unresolved ${this.type} reference: ${this.xref}
    </div>`;return this.renderWithTooltip(`${e} unresolved`,"?",t)}renderResolvedReference(e){if(this.type===er.SECTION)return this.removeEventListener("keydown",this.keyDown),this.removeEventListener("mousedown",this.mouseDown),M`<a class=${e} href="#${this.xref}" @click=${this.goto}>${this.index}</a>`;{const t=M`<div class="cross-ref-tooltip"></div>`;return this.renderWithTooltip(e,this.index,t)}}renderWithTooltip(e,t,n){const i=M`<div class="tooltip">${n}</div>`;return M`<span class=${e} @dblclick=${this.goto} tabindex=0>${i}${t}</span>`}render(){const{type:e,index:t,short:n}=this,i=`cross-ref ${e}${n?"":" full"}`;return null!=t?this.renderResolvedReference(i):this.renderUnresolvedReference(i)}}),window.customElements.define("option-text",class extends zi{static get properties(){return{index:{type:Number},options:{type:Array},span:{type:Number},title:{type:String},prefix:{type:String},suffix:{type:String}}}constructor(){super(),this.index=0,this.options=[],this.span=1,this.title="Draggable text",this.prefix="",this.suffix="",this.addEventListener("click",(e=>e.stopPropagation())),this.addEventListener("mousedown",(e=>this.onMouseDown(e)))}initialChildNodes(e){e.length&&(this.options=e),this.value=this.options[0]}onMouseDown(e){e.stopImmediatePropagation();const t=e.x,n=this.index,i=this.ownerDocument.body.style.cursor;this.ownerDocument.body.style.cursor="ew-resize";const r=this.style.MozUserSelect;this.style.MozUserSelect="none";const s=e=>{e.preventDefault(),e.stopImmediatePropagation();const i=Math.round((e.x-t)/this.span),r=Math.max(Math.min(n+i,this.options.length-1),0);this.index!==r&&(this.index=r,this.value=this.options[r],this.dispatchEvent(new Event("input")),this.requestUpdate())},o=e=>{e.preventDefault(),e.stopImmediatePropagation(),this.ownerDocument.body.style.cursor=i,this.style.MozUserSelect=r,window.removeEventListener("mousemove",s),window.removeEventListener("mouseup",o)};window.addEventListener("mousemove",s),window.addEventListener("mouseup",o)}render(){const e=this.options[this.index];return M`<span class="option-text" title=${this.title}>${this.prefix}${e}${this.suffix}</span>`}}),window.customElements.define("toggle-text",class extends zi{static get properties(){return{value:{type:Boolean},title:{type:String},clickable:{type:Boolean,converter:e=>e&&"false"!==e}}}constructor(){super(),this.value=!0,this.clickable=!0,this.title="Clickable text",this.addEventListener("mousedown",(e=>this.onClick(e)))}initialChildNodes(e){this.options=e.filter((e=>1===e.nodeType))}onClick(e){this.clickable&&(e.stopImmediatePropagation(),e.preventDefault(),this.value=!this.value,this.dispatchEvent(new Event("input")),this.requestUpdate())}render(){const e=this.clickable?this.title:null,t=this.clickable?"toggle-text":null,n=this.options[this.value?0:1];return M`<span class=${t} title=${e}>${n}</span>`}}),window.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector("article");pe(new Fi,e,ir,{_id:3,attrs:[["1","src",0],["2","clickable",1],["3","src",2]],events:[]})}));
